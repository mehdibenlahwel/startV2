<!doctype html>
<html lang="ar" dir="rtl">
<head>
<!-- Favicon -->
<link rel="icon" href="favicon.ico" type="image/x-icon">

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ابدأ الآن | Intilakah</title>
  <link rel="icon" href="data:,">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;700;800&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/><style>
        :root {
            --primary: #1a99a7;
            --primary-light: #e8f7f9;
            --primary-dark: #0f7c8a;
            --secondary: #f97316;
            --dark: #0f172a;
            --text: #334155;
            --muted: #64748b;
            --light: #f8fafc;
            --bg: #ffffff;
            --card: #ffffff;
            --border: rgba(26, 153, 167, 0.14);
            --shadow: 0 10px 26px rgba(2, 20, 32, 0.06);
            --gradient-primary: linear-gradient(135deg, #1a99a7 0%, #0f7c8a 100%);
            --gradient-secondary: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }

        /* CORRECTION: Isoler les styles dans une classe spécifique */
        .steps-process-container {
            font-family: "Cairo", Arial, sans-serif;
            background: var(--bg);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
        }
        
        .steps-process-container * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        .steps-process-container .page {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styling */
        .steps-process-container .section-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }

        .steps-process-container .section-header .badge {
            display: inline-block;
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 16px;
            border: 1px solid rgba(26, 153, 167, 0.2);
        }

        .steps-process-container .section-header h1 {
            font-size: 32px;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 16px;
            line-height: 1.3;
        }

        .steps-process-container .section-header .subtitle {
            font-size: 18px;
            color: var(--text);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Workflow Container */
        .steps-process-container .workflow {
            background: var(--card);
            border-radius: 24px;
            box-shadow: var(--shadow);
            padding: 40px 30px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .steps-process-container .workflow::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-primary);
        }

        /* Steps Grid */
        .steps-process-container .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 20px;
        }

        /* Card Styling */
        .steps-process-container .card {
            background: var(--card);
            border-radius: 20px;
            padding: 24px;
            border: 1px solid rgba(26, 153, 167, 0.12);
            box-shadow: 0 4px 12px rgba(2, 20, 32, 0.04);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .steps-process-container .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(2, 20, 32, 0.1);
            border-color: rgba(26, 153, 167, 0.3);
        }

        .steps-process-container .card.highlight {
            border: 1px solid rgba(26, 153, 167, 0.3);
            box-shadow: 0 8px 24px rgba(26, 153, 167, 0.15);
        }

        .steps-process-container .card.highlight::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 5px;
            height: 100%;
            background: var(--gradient-primary);
        }

        /* Card Header */
        .steps-process-container .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .steps-process-container .step-num {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            background: var(--gradient-primary);
            color: white;
            font-weight: 900;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-left: 16px;
            box-shadow: 0 8px 16px rgba(26, 153, 167, 0.25);
        }

        .steps-process-container .highlight .step-num {
            background: var(--gradient-secondary);
            box-shadow: 0 8px 16px rgba(249, 115, 22, 0.25);
        }

        .steps-process-container .step-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--dark);
            line-height: 1.4;
        }

        /* Card Body */
        .steps-process-container .card-body {
            flex-grow: 1;
        }

        .steps-process-container .card-body p {
            color: var(--text);
            font-size: 15px;
            margin-bottom: 16px;
            line-height: 1.7;
        }

        /* Card Footer */
        .steps-process-container .card-footer {
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px dashed rgba(26, 153, 167, 0.15);
        }

        .steps-process-container .details {
            display: flex;
            align-items: center;
            font-size: 13px;
            color: var(--muted);
        }

        .steps-process-container .details i {
            margin-left: 8px;
            color: var(--primary);
        }

        .steps-process-container .highlight .details i {
            color: var(--secondary);
        }

        /* Time and Icon */
        .steps-process-container .time-badge {
            display: inline-flex;
            align-items: center;
            background: var(--primary-light);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 12px;
            margin-top: 8px;
        }

        .steps-process-container .highlight .time-badge {
            background: rgba(249, 115, 22, 0.1);
            color: var(--secondary);
        }

        .steps-process-container .time-badge i {
            margin-left: 5px;
        }

        /* Process Flow Indicator */
        .steps-process-container .process-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
        }

        .steps-process-container .flow-line {
            height: 2px;
            background: linear-gradient(to left, rgba(26, 153, 167, 0.2), rgba(26, 153, 167, 0.6), rgba(26, 153, 167, 0.2));
            flex-grow: 1;
            max-width: 100px;
        }

        .steps-process-container .flow-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            box-shadow: 0 6px 12px rgba(26, 153, 167, 0.25);
        }

        /* Responsive Design */
        @media (max-width: 1100px) {
            .steps-process-container .steps {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .steps-process-container .section-header h1 {
                font-size: 28px;
            }
            
            .steps-process-container .section-header .subtitle {
                font-size: 16px;
            }
            
            .steps-process-container .workflow {
                padding: 30px 20px;
            }
            
            .steps-process-container .steps {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .steps-process-container .card {
                padding: 20px;
            }
            
            .steps-process-container .step-num {
                width: 42px;
                height: 42px;
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .steps-process-container .section-header h1 {
                font-size: 24px;
            }
            
            .steps-process-container .page {
                padding: 10px;
            }
            
            .steps-process-container .workflow {
                padding: 25px 15px;
                border-radius: 20px;
            }
            
            .steps-process-container .step-title {
                font-size: 16px;
            }
            
            .steps-process-container .card-body p {
                font-size: 14px;
            }
        }
    
    /* FORCE CAIRO FONT EVERYWHERE */
    html, body, button, input, select, textarea, label, a, p, span, div { font-family: 'Cairo', sans-serif !important; }

    /* === Crypto layout fix === */
    @media (min-width: 768px){
      .crypto-options{display:grid !important; grid-template-columns:repeat(5,1fr) !important; gap:10px !important; flex-wrap:unset !important;}
      .crypto-option{min-width:0 !important; padding:10px 10px !important; justify-content:center !important;}
      .crypto-logo{width:26px !important; height:26px !important;}
      .crypto-name{font-size:14px !important;}
    }
    @media (max-width: 767px){
      .crypto-options{display:grid !important; grid-template-columns:repeat(2,1fr) !important; gap:10px !important;}
      .crypto-option{min-width:0 !important; justify-content:center !important;}
      .crypto-option:nth-child(5){grid-column:1 / -1 !important; justify-self:center !important; width:calc(50% - 5px) !important;}
    }

    /* Network dropdown (USDT) */
    .network-select-wrap{margin-top:10px; display:none;}
    .network-select{width:100%; padding:12px 14px; border-radius:12px; border:1px solid #e2e8f0; background:#f8fafc; font-weight:700; cursor:pointer;}
    .network-options{display:none !important;} /* hide buttons, keep JS source */

    /* ✅ Improved Network Select (Crypto) */
    #networkSelectWrap{margin-top:12px; display:none;}
    #networkSelect{
      width:100%;
      padding:14px 16px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.12);
      background:#ffffff;
      font-weight:800;
      font-size:16px;
      color:#0f172a;
      box-shadow:0 10px 26px rgba(2,20,32,.06);
      outline:none;
      transition:all .2s ease;
      cursor:pointer;
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      background-image:
        linear-gradient(45deg, transparent 50%, #0f7c8a 50%),
        linear-gradient(135deg, #0f7c8a 50%, transparent 50%),
        linear-gradient(to right, rgba(15,124,138,.18), rgba(15,124,138,.18));
      background-position:
        calc(16px) calc(50% - 3px),
        calc(10px) calc(50% - 3px),
        calc(36px) 50%;
      background-size:6px 6px, 6px 6px, 1px 22px;
      background-repeat:no-repeat;
    }
    #networkSelect:focus{
      border-color:#0097b2;
      box-shadow:0 0 0 4px rgba(0,151,178,.14), 0 10px 26px rgba(2,20,32,.08);
    }
    #networkSelection label{font-weight:800;}


/* Crypto redirect loader */
.crypto-redirect-loader{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  margin-top:16px;
  padding:14px 16px;
  border-radius:14px;
  background:#ffffff;
  box-shadow:0 8px 22px rgba(0,0,0,.08);
  font-family:Cairo, sans-serif;
}
.crypto-spinner{
  width:18px;
  height:18px;
  border:3px solid rgba(0,109,128,.25);
  border-top-color:#006d80;
  border-radius:50%;
  display:inline-block;
  animation: cryptoSpin .8s linear infinite;
}
.crypto-loading-text{
  font-size:14px;
  opacity:.9;
}
@keyframes cryptoSpin{ to{ transform: rotate(360deg);} }


/* =========================================================
   Button unification (page buttons only - excluding header/footer)
   - Make all main action buttons same height/typography
   - Align crypto Generate/Confirm colors with primary gradient
   ========================================================= */
:root{
  --ai-btn-grad-primary: linear-gradient(135deg, #0097b2 0%, #006d80 100%);
  --ai-btn-grad-dark: linear-gradient(135deg, #2c2c2c 0%, #121212 100%);
}

#registrationSubmitBtn,
#backToFormBtn,
#cardPaymentBtn,
#cryptoPaymentBtn,
#pay-now-btn,
#generateBtn,
#confirmBtn,
#resetBtn,
.copy-btn{
  font-family: 'Cairo', sans-serif !important;
  font-weight: 700 !important;
  border-radius: 12px !important;
  padding: 14px 18px !important;
  min-height: 52px !important;
  line-height: 1.1 !important;
  letter-spacing: 0 !important;
  border: none !important;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease, opacity .2s ease;
}

#registrationSubmitBtn,
#cardPaymentBtn,
#cryptoPaymentBtn,
#pay-now-btn,
#generateBtn,
#confirmBtn{
  background: var(--ai-btn-grad-primary) !important;
  color: #fff !important;
}

#backToFormBtn,
#resetBtn{
  background: var(--ai-btn-grad-dark) !important;
  color: #fff !important;
}

#registrationSubmitBtn:hover:not(:disabled),
#backToFormBtn:hover:not(:disabled),
#cardPaymentBtn:hover:not(:disabled),
#cryptoPaymentBtn:hover:not(:disabled),
#pay-now-btn:hover:not(:disabled),
#generateBtn:hover:not(:disabled),
#confirmBtn:hover:not(:disabled),
#resetBtn:hover:not(:disabled),
.copy-btn:hover:not(:disabled){
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(0,0,0,.14);
}

#registrationSubmitBtn:disabled,
#backToFormBtn:disabled,
#cardPaymentBtn:disabled,
#cryptoPaymentBtn:disabled,
#pay-now-btn:disabled,
#generateBtn:disabled,
#confirmBtn:disabled,
#resetBtn:disabled,
.copy-btn:disabled{
  opacity: .65 !important;
  cursor: not-allowed !important;
  box-shadow: none !important;
  transform: none !important;
}

/* Exclude header/footer component buttons explicitly (safety) */
header-menu-startnow button,
ai-footer-startnow button{
  min-height: unset !important;
  padding: unset !important;
  border-radius: unset !important;
  font-weight: unset !important;
  box-shadow: unset !important;
  transform: unset !important;
}

</style><style>
    /* ==========================================================
       ✅ Base CSS Fixes (بديل ستايلات Shopify Theme)
       ========================================================== */
    *, *::before, *::after { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #ffffff;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .page-width { max-width: 1200px; margin: 0 auto; padding: 0 16px; }
    .gradient { padding: 80px 0; }
    .center { text-align: center; }

    .title-wrapper .title { font-size: 34px; font-weight: 700; margin: 0 0 10px; }
    .subheading { font-size: 18px; margin-top: 0; color: #666; }

    .enqulab-form-container,
    .enqulab-form-section,
    .enqulab-form-row,
    .enqulab-form-group { overflow: visible !important; }

    .enqulab-form-row {
      display: flex !important;
      flex-wrap: wrap !important;
      width: 100% !important;
      margin: 0 -12px !important;
    }

    .enqulab-form-group {
      flex: 1 1 300px !important;
      min-width: 280px !important;
      padding: 0 12px !important;
      width: 100% !important;
    }

    .enqulab-form-group label,
    .enqulab-form-group input,
    .enqulab-form-group select,
    .enqulab-form-group textarea {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
    }

    .enqulab-form-group select {
      appearance: auto !important;
      -webkit-appearance: menulist !important;
      -moz-appearance: menulist !important;
      background-color: #fff !important;
      line-height: normal !important;
    }

    .enqulab-form-group select option,
    .enqulab-form-group select optgroup {
      color: #333 !important;
      background: #fff !important;
    }

    .ltr-input { direction: ltr; text-align: left; }
    .enqulab-form-group .ltr-input { padding-left: 40px !important; }

    /* ==========================================================
       ✅ CSS الأصلي (التسجيل + الباقات)
       ========================================================== */
    @keyframes floatAnimation {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes pulseAnimation {
      0%, 100% { box-shadow: 0 0 0 0 rgba(0, 151, 178, 0.7); }
      50% { box-shadow: 0 0 0 20px rgba(0, 151, 178, 0); }
    }

    .pricing-card:hover { animation: floatAnimation 0.3s ease-in-out; }
    .pricing-card__best-seller .pricing-card__header { animation: pulseAnimation 2s infinite; }

    .enqulab-form-step { transition: all 0.5s ease-in-out; }
    .enqulab-form-step.hidden { display: none; }
    .enqulab-form-step.active { display: block; }

    .form-disabled input,
    .form-disabled select,
    .form-disabled textarea,
    .form-disabled button {
      opacity: 0.7;
      pointer-events: none;
      cursor: not-allowed;
    }

    .form-submitted #registrationSubmitBtn { display: none; }

    .pricing-card.selected {
      border: 4px solid #ff6b00 !important;
      box-shadow: 0 15px 40px rgba(255, 107, 0, 0.3) !important;
      transform: scale(1.02);
      transition: all 0.3s ease;
      position: relative;
    }

    .pricing-card.selected::after {
      content: "✓ الباقة المختارة";
      position: absolute;
      top: -12px;
      right: 20px;
      background: #ff6b00;
      color: white;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
      z-index: 3;
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.4);
    }

    .checkout-button-container {
      text-align: center;
      margin-top: 40px;
      margin-bottom: 40px;
      padding-top: 30px;
      border-top: 2px solid #f0f0f0;
    }

    .checkout-button {
      background: linear-gradient(135deg, #0097b2, #006d80);
      color: white;
      padding: 18px 50px;
      border-radius: 12px;
      font-size: 22px;
      font-weight: bold;
      border: none;
      box-shadow: 0 10px 30px rgba(0, 151, 178, 0.4);
      cursor: pointer;
      display: none;
      transition: all 0.3s ease;
      width: auto;
      min-width: 300px;
      margin: 10px;
    }

    .checkout-button:hover {
      background: linear-gradient(135deg, #006d80, #005a6b);
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(0, 151, 178, 0.5);
    }

    .checkout-button:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .crypto-button {
      background: linear-gradient(135deg, #2c2c2c, #121212);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
    }
    .crypto-button:hover {
      background: linear-gradient(135deg, #1f1f1f, #000000);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35);
    }

    @media (max-width: 768px) {
      .checkout-button {
        width: 100%;
        padding: 16px;
        font-size: 20px;
        min-width: auto;
        margin: 10px 0;
      }
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
      margin-top: 20px;
    }

    @media screen and (min-width: 750px) {
      .pricing-grid {
        grid-template-columns: repeat(3, 1fr);
        align-items: start;
      }
      .pricing-card__best-seller { order: 2; margin-top: -20px; }
      .pricing-card:nth-child(1) { order: 1; }
      .pricing-card:nth-child(3) { order: 3; }
    }

    .pricing-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      border: 2px solid #eaeaea;
    }

    .pricing-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 151, 178, 0.25);
      border-color: #0097b2;
    }

    .pricing-card__best-seller {
      border: 3px solid #0097b2 !important;
      transform: scale(1.05);
      z-index: 2;
      box-shadow: 0 15px 40px rgba(0, 151, 178, 0.3) !important;
    }

    @media screen and (max-width: 749px) {
      .pricing-card__best-seller {
        transform: none;
        margin-top: 20px;
        border-width: 3px !important;
        order: 2;
      }
      .pricing-grid { display: flex; flex-direction: column; }
      .pricing-card:nth-child(1) { order: 1; }
      .pricing-card:nth-child(3) { order: 3; }
    }

    .pricing-card__header {
      padding: 35px 20px;
      text-align: center;
      color: white;
      position: relative;
      background: linear-gradient(135deg, #737373, #5a5a5a);
    }

    .pricing-card__best-seller .pricing-card__header {
      background: linear-gradient(135deg, #0097b2, #006d80) !important;
      padding: 40px 20px;
    }

    .pricing-card__title { font-size: 26px; font-weight: bold; margin-bottom: 15px; color: white !important; }
    .pricing-card__price { display: flex; flex-direction: column; align-items: center; }
    .pricing-card__price .price { font-size: 48px; font-weight: bold; line-height: 1; }
    .pricing-card__best-seller .pricing-card__price .price { font-size: 52px; }
    .pricing-card__price .period { font-size: 14px; opacity: 0.8; margin-top: 5px; }
    .pricing-card__body { padding: 30px; position: relative; flex-grow: 1; }

    .pricing-card__features { list-style: none; padding: 0; margin: 0; }
    .pricing-card__features li {
      padding: 12px 0;
      border-bottom: 1px solid rgba(115, 115, 115, 0.1);
      color: #737373;
      position: relative;
      padding-left: 30px;
      font-size: 15px;
    }
    .pricing-card__features li:before {
      content: "✓";
      position: absolute;
      left: 0;
      color: #0097b2;
      font-weight: bold;
      font-size: 18px;
    }

    .pricing-card__badge {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 25px;
      border-radius: 25px;
      font-weight: bold;
      font-size: 16px;
      z-index: 2;
      background: #0097b2;
      color: white;
      box-shadow: 0 5px 20px rgba(0, 151, 178, 0.4);
      white-space: nowrap;
      border: 2px solid white;
    }

    .pricing-card__includes {
      margin-bottom: 25px;
      padding: 12px;
      background: rgba(0, 151, 178, 0.15);
      border-radius: 10px;
      text-align: center;
      border-left: 4px solid #0097b2;
    }

    .pricing-card__footer { padding: 0 30px 30px; text-align: center; margin-top: auto; }
    .pricing-card__notice { font-size: 13px; color: #737373; margin-top: 15px; line-height: 1.5; padding: 0 10px; }
    .pricing-disclaimer { max-width: 800px; margin: 50px auto 0; }

    .enqulab-form-group input:focus,
    .enqulab-form-group select:focus,
    .enqulab-form-group textarea:focus {
      outline: none;
      border-color: #0197b2;
      box-shadow: 0 0 0 3px rgba(1, 151, 178, 0.1);
      background-color: white;
    }

    /* ==========================================================
       ✅ Crypto Section (مطابق للكود الثاني في الشكل والستايل)
       ========================================================== */
    .crypto-section {
      display: none;
      max-width: 900px;
      margin: 30px auto 60px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.1);
      overflow: hidden;
      border: 1px solid #eee;
      padding: 35px 30px;
      font-family: 'Tajawal', sans-serif;
    }

    .section-header { text-align: center; margin-bottom: 25px; }
    .section-header h2 { margin: 0 0 10px; font-size: 1.8rem; color: #2c3e50; font-weight: 700; }
    .section-header p { margin: 0; color: #64748b; }

    .plan-selection { display: none; } /* ✅ تم إلغاء اختيار الباقة من الكريبتو */

    .form-group { margin-bottom: 20px; }
    .form-group label { font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block; }

    input[type="email"] {
      width: 100%;
      padding: 12px 15px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 1rem;
      outline: none;
      transition: all .2s;
    }

    .crypto-options {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .crypto-option {
      flex: 1;
      min-width: 160px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      padding: 14px 15px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all .2s;
      justify-content: flex-start;
    }

    .crypto-option:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.06); }
    .crypto-option.active { border-color: #3498db; background: #eef6ff; }
    .crypto-option.disabled { opacity: 0.6; pointer-events: none; }

    .crypto-logo { width: 32px; height: 32px; border-radius: 50%; }
    .crypto-name { font-weight: 600; color: #2c3e50; }

    .error {
      display: none;
      margin-top: 10px;
      background: #fde8e8;
      color: #c53030;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      border-right: 3px solid #e74c3c;
    }

    .network-options { display: flex; gap: 10px; flex-wrap: wrap; }
    .network-btn {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      padding: 10px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all .2s;
    }
    .network-btn:hover { background: #eef6ff; border-color: #3498db; }
    .network-btn.active { background: #3498db; color: #fff; border-color: #2b7cb5; }

    .generate-btn {
      width: 100%;
      padding: 14px 18px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(90deg, #3498db 0%, #2c5282 100%);
      color: white;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all .25s;
      display: none;
    }
    .generate-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(52,152,219,0.25); }
    .generate-btn:disabled { opacity: 0.7; cursor: not-allowed; }

    .payment-details {
      background: #f8fafc;
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      border: 1px solid #e2e8f0;
      display: none;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #e2e8f0;
    }
    .detail-row:last-child { border-bottom: none; }
    .detail-label { color: #64748b; font-weight: 500; }
    .detail-value { color: #2c3e50; font-weight: 600; }
    .detail-value.crypto-amount {
      color: #3498db;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .qr-code-container {
      background: #f8fafc;
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      border: 1px solid #e2e8f0;
      text-align: center;
      display: none;
    }

    .qr-code {
      margin: 10px auto;
      padding: 15px;
      background: white;
      border-radius: 10px;
      display: inline-block;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }

    .qr-code img { display: block; border-radius: 8px; max-width: 100%; height: auto; }

    .address-container { margin: 20px 0; display: none; }
    .address-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .copy-btn {
      background: #e3f2fd;
      color: #3498db;
      border: 1px solid #bbdefb;
      padding: 8px 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      width: auto;
      cursor: pointer;
      transition: all .2s;
    }
    .copy-btn:hover { background: #bbdefb; transform: translateY(-1px); }

    .address-box {
      display: flex;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #d1d9e6;
      background: #f8fafc;
    }

    .address-box input {
      flex: 1;
      border: none;
      background: transparent;
      padding: 15px;
      font-family: monospace;
      font-size: 0.9rem;
      color: #2c3e50;
      font-weight: bold;
      direction: ltr !important;
      text-align: left !important;
    }

    .address-box button {
      width: auto;
      border: none;
      padding: 0 18px;
      background: #3498db;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
    }

    .address-warning {
      background: #fff3cd;
      border-right: 5px solid #ffc107;
      color: #856404;
      padding: 12px 15px;
      margin-top: 15px;
      border-radius: 8px;
      font-size: 0.85rem;
      text-align: right;
      line-height: 1.5;
      display: none;
    }

    .network-info {
      margin-top: 8px;
      padding: 8px 12px;
      background: #e8f4fd;
      border-radius: 6px;
      font-size: 0.85rem;
      color: #2c5282;
      border-right: 3px solid #3498db;
      display: none;
    }

    .action-buttons {
      display: none;
      gap: 10px;
      margin-top: 20px;
    }
    .action-buttons button { flex: 1; }

    .confirm-btn {
      padding: 12px 16px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(90deg, #2ecc71 0%, #27ae60 100%);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }

    .reset-btn {
      padding: 12px 16px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(90deg, #95a5a6 0%, #7f8c8d 100%);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }

    .success, .error-general {
      margin-top: 15px;
      padding: 12px 15px;
      border-radius: 10px;
      display: none;
      font-weight: 700;
      line-height: 1.6;
    }
    .success { background: #ecfdf5; border: 1px solid #bbf7d0; color: #065f46; }
    .error-general { background: #fde8e8; border: 1px solid #fecaca; color: #991b1b; }

    .confirmation-message {
      display: none;
      margin-top: 20px;
      background: #ecfdf5;
      border: 1px solid #bbf7d0;
      color: #065f46;
      padding: 15px;
      border-radius: 12px;
      font-weight: 800;
      text-align: center;
      line-height: 1.7;
    }

    .crypto-icon-small {
      width: 20px;
      height: 20px;
      vertical-align: middle;
      margin-right: 5px;
    }

    @media (max-width: 500px) {
      .crypto-section { padding: 25px 20px; }
      .crypto-options { flex-direction: column; }
      .crypto-option { min-width: 100%; }
      .network-options { flex-direction: column; }
      .action-buttons { flex-direction: column; }
    }
  </style>
<style>
:root {
    --primary-color: #1a99a7;
    --secondary-color: #2c3e50;
    --accent-color: #3B556E;
  }

  .ai-header-startnow {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: #ffffff;
    backdrop-filter: blur(12px);
    border-bottom: 0px solid rgba(0, 0, 0, 5);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateY(0);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  .ai-header-startnow::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
      transparent, 
      var(--primary-color) 20%, 
      var(--primary-color) 80%, 
      transparent
    );
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  .ai-header-startnow.scrolled {
    background: #ffffff;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-startnow.scrolled::before {
    opacity: 1;
  }

  .ai-header-startnow.hidden {
    transform: translateY(-100%);
  }

  .ai-header-spacer-startnow {
    height: 70px;
  }

  .ai-header-container-startnow {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 40px;
    height: 70px;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-logo-startnow {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    position: relative;
    z-index: 2;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-logo-startnow a {
    display: block;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    padding: 0;
  }

  .ai-header-logo-startnow a::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: -1;
  }

  .ai-header-logo-startnow a:hover {
    transform: translateY(-2px) scale(1.02);
  }

  .ai-header-logo-startnow a:hover::before {
    opacity: 0.1;
  }

  .ai-header-logo-startnow img {
    max-width: 150px;
    height: auto;
    display: block;
    transition: transform 0.3s ease;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-logo-placeholder-startnow {
    width: 150px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
    border-radius: 12px;
    position: relative;
    overflow: hidden;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-logo-placeholder-startnow::before {
    content: '';
    position: absolute;
    width: 200%;
    height: 200%;
    background: conic-gradient(
      transparent,
      var(--primary-color),
      transparent 30%
    );
    animation: rotate 4s linear infinite;
  }

  .ai-header-logo-placeholder-startnow svg {
    width: 60%;
    height: 60%;
    position: relative;
    z-index: 1;
    fill: white;
  }

  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .ai-header-nav-startnow {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .ai-header-menu-startnow {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    gap: 15px;
    align-items: center;
  }

  .ai-header-menu-item-startnow {
    position: relative;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  /* تخصيص العنصر الثاني مع بوردر مميز - نفس الحجم بالضبط */
  .ai-header-menu-item-startnow:nth-child(6) .ai-header-menu-link-startnow {
    position: relative;
    border: 2px solid transparent;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(45deg, var(--primary-color), var(--accent-color)) border-box;
    border-radius: 8px;
    padding: 12px 24px !important; /* نفس الحجم بالضبط */
    font-weight: 400 !important; /* نفس الوزن */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 20px !important; /* نفس حجم الخط */
    margin: 0;
  }

  /* تأثير عند التمرير */
  .ai-header-menu-item-startnow:nth-child(6) .ai-header-menu-link-startnow:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-width: 2px;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, var(--primary-color), var(--accent-color)) border-box;
  }

  /* النص بلون متدرج */
  .ai-header-menu-item-startnow:nth-child(6) .ai-header-menu-link-startnow span {
    background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* إذا كان العنصر نشط (Active state) */
  .ai-header-menu-item-startnow:nth-child(6).active .ai-header-menu-link-startnow {
    border: 2px solid transparent;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, var(--accent-color), var(--primary-color)) border-box;
    box-shadow: 0 0 30px rgba(var(--primary-color-rgb), 0.3);
  }

  /* تنسيق جميع العناصر بنفس الحجم بالضبط */
  .ai-header-menu-link-startnow {
    color: #1a1a1a;
    text-decoration: none;
    font-size: 20px;
    font-weight: 400;
    padding: 12px 24px !important; /* نفس الحجم بالضبط */
    display: flex;
    align-items: center;
    position: relative;
    border-radius: 8px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    letter-spacing: 0.5px;
    overflow: hidden;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    min-height: 48px; /* ارتفاع موحد */
    box-sizing: border-box;
  }

  .ai-header-menu-link-startnow::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
    border-radius: 50%;
    opacity: 0;
    z-index: -1;
  }

  .ai-header-menu-link-startnow::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 16px;
    right: 16px;
    height: 2px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 2px;
  }

  .ai-header-menu-link-startnow:hover {
    color: #1a99a7;
    transform: translateY(-2px);
  }

  .ai-header-menu-link-startnow:hover::before {
    width: 120%;
    height: 120%;
    opacity: 0.1;
  }

  .ai-header-menu-link-startnow:hover::after {
    transform: scaleX(1);
  }

  /* تخصيص العنصر النشط (الصفحة الحالية) */
  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow {
    font-weight: 700;
    color: var(--primary-color) !important;
    position: relative;
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow::before {
    display: none;
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow::after {
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    transform: scaleX(1);
    bottom: -3px;
    box-shadow: 0 2px 8px rgba(var(--primary-color-rgb), 0.3);
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow .highlight-text {
    position: relative;
    display: inline-block;
    padding: 2px 0;
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow .highlight-text::before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 2px;
    background: var(--accent-color);
    transform: scaleX(0.8);
    transition: transform 0.3s ease;
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow:hover .highlight-text::before {
    transform: scaleX(1);
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow:hover {
    color: var(--accent-color) !important;
    transform: translateY(-3px);
  }

  .ai-header-menu-item-startnow.active .ai-header-menu-link-startnow:hover::after {
    height: 4px;
    background: linear-gradient(90deg, var(--accent-color), var(--primary-color));
    box-shadow: 0 3px 10px rgba(var(--accent-color-rgb), 0.4);
  }

  /* تخصيص القائمة الموبايل */
  .ai-header-mobile-menu-item-startnow.active .ai-header-mobile-menu-link-startnow {
    font-weight: 700;
    color: var(--primary-color) !important;
    position: relative;
  }

  .ai-header-mobile-menu-item-startnow.active .ai-header-mobile-menu-link-startnow::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 16px;
    right: 16px;
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 2px;
  }

  .ai-header-mobile-menu-item-startnow.active .ai-header-mobile-menu-link-startnow:hover {
    color: var(--accent-color) !important;
    transform: translateX(10px);
  }

  .ai-header-decoration-startnow {
    position: absolute;
    pointer-events: none;
    z-index: 0;
  }

  .ai-header-decoration-startnow.circle-1 {
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
    opacity: 0.03;
    top: -150px;
    right: -100px;
    animation: float 20s ease-in-out infinite;
  }

  .ai-header-decoration-startnow.circle-2 {
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, var(--accent-color) 0%, transparent 70%);
    opacity: 0.02;
    bottom: -100px;
    left: -50px;
    animation: float 25s ease-in-out infinite reverse;
  }

  @keyframes float {
    0%, 100% {
      transform: translate(0, 0) rotate(0deg);
    }
    33% {
      transform: translate(20px, -20px) rotate(120deg);
    }
    66% {
      transform: translate(-15px, 15px) rotate(240deg);
    }
  }

  .ai-header-mobile-toggle-startnow {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    color: #1a1a1a;
    position: relative;
    z-index: 1002;
    border-radius: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  .ai-header-mobile-toggle-startnow::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
  }

  .ai-header-mobile-toggle-startnow:hover {
    transform: translateY(-2px);
  }

  .ai-header-mobile-toggle-startnow:hover::before {
    opacity: 0.1;
  }

  .ai-header-hamburger-startnow {
    width: 26px;
    height: 20px;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .ai-header-hamburger-line-startnow {
    width: 100%;
    height: 2px;
    background: #1a1a1a;
    border-radius: 2px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .ai-header-hamburger-line-startnow:nth-child(1) {
    transform-origin: left;
  }

  .ai-header-hamburger-line-startnow:nth-child(3) {
    transform-origin: left;
  }

  .ai-header-mobile-toggle-startnow.active .ai-header-hamburger-line-startnow:nth-child(1) {
    transform: translateY(9px) rotate(45deg) scaleX(1.2);
  }

  .ai-header-mobile-toggle-startnow.active .ai-header-hamburger-line-startnow:nth-child(6) {
    opacity: 0;
    transform: translateX(-10px);
  }

  .ai-header-mobile-toggle-startnow.active .ai-header-hamburger-line-startnow:nth-child(3) {
    transform: translateY(-9px) rotate(-45deg) scaleX(1.2);
  }

  .ai-header-mobile-menu-startnow {
    position: fixed;
    top: 0;
    right: -100%;
    width: 380px;
    height: 100vh;
    background: #ffffff;
    backdrop-filter: blur(25px);
    box-shadow: -12px 0 40px rgba(0, 0, 0, 0.15);
    transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1001;
    overflow-y: auto;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-top: 0 !important;
  }

  .ai-header-mobile-menu-startnow.active {
    right: 0;
  }

  .ai-header-mobile-header-startnow {
    padding: 20px 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-bottom: 0px solid rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
  }

  .ai-header-mobile-header-startnow::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
  }

  .ai-header-mobile-menu-list-startnow {
    list-style: none;
    margin: 0;
    padding: 20px;
  }

  .ai-header-mobile-menu-item-startnow {
    margin-bottom: 8px;
    opacity: 0;
    transform: translateX(40px);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .ai-header-mobile-menu-startnow.active .ai-header-mobile-menu-item-startnow {
    opacity: 1;
    transform: translateX(0);
  }

  .ai-header-mobile-menu-link-startnow {
    color: #1a1a1a;
    text-decoration: none;
    font-size: 20px;
    font-weight: 400;
    padding: 16px 24px !important; /* نفس الحجم للجوال */
    display: flex;
    align-items: center;
    gap: 12px;
    border-radius: 8px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.05);
    min-height: 56px; /* ارتفاع موحد للجوال */
    box-sizing: border-box;
  }

  .ai-header-mobile-menu-link-startnow::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }

  .ai-header-mobile-menu-link-startnow:hover {
    color: #1a99a7;
    background: rgba(0, 0, 0, 0.03);
    transform: translateX(8px);
  }

  .ai-header-mobile-menu-link-startnow:hover::before {
    left: 100%;
  }

  .ai-header-mobile-menu-link-startnow::after {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--primary-color);
    border-radius: 50%;
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .ai-header-mobile-menu-link-startnow:hover::after {
    opacity: 1;
    transform: scale(1);
  }

  /* تنسيق الجملة مع الأيقونة في الجوال */
  .ai-header-mobile-footer-note-startnow {
    margin-top: 30px;
    padding: 20px 15px;
    border-top: 1px solid rgba(128, 128, 128, 0.2);
    text-align: center;
    background: rgba(128, 128, 128, 0.05);
    border-radius: 8px;
    margin-left: 10px;
    margin-right: 10px;
    direction: rtl;
  }

  .ai-header-mobile-footer-content-startnow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: #666;
    font-size: 13px;
    line-height: 1.5;
  }

  .ai-header-shield-icon-startnow {
    flex-shrink: 0;
    opacity: 0.7;
  }

  .ai-header-footer-text-startnow {
    text-align: center;
  }

  /* تأثير بسيط عند التمرير */
  .ai-header-mobile-footer-note-startnow:hover .ai-header-shield-icon-startnow {
    opacity: 0.9;
    transform: scale(1.1);
    transition: all 0.3s ease;
  }

  .ai-header-overlay-startnow {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, visibility 0.5s ease;
    z-index: 1000;
  }

  .ai-header-overlay-startnow.active {
    opacity: 1;
    visibility: visible;
  }

  @media screen and (max-width: 990px) {
    .ai-header-nav-startnow {
      display: none;
    }

    .ai-header-mobile-toggle-startnow {
      display: block;
    }

    /* تخصيص للجوال - الجزء المهم */
    /* إخفاء بوردر سطح المكتب في القائمة العادية */
    .ai-header-menu-item-startnow:nth-child(6) .ai-header-menu-link-startnow {
      border: none !important;
      background: none !important;
      padding: 8px 16px !important;
      box-shadow: none !important;
      margin: 0 !important;
    }
    
    /* تخصيص القائمة الموبايل للعنصر الثاني - نفس الحجم */
    .ai-header-mobile-menu-item-startnow:nth-child(6) .ai-header-mobile-menu-link-startnow {
      border: 2px solid transparent;
      background: linear-gradient(white, white) padding-box,
                  linear-gradient(45deg, var(--primary-color), var(--accent-color)) border-box;
      border-radius: 8px;
      padding: 16px 24px !important; /* نفس الحجم */
      font-weight: 400 !important; /* نفس الوزن */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      margin: 8px 0 !important;
      transform: none !important;
      text-align: center;
      display: block;
      width: 90%;
      margin-left: auto !important;
      margin-right: auto !important;
      font-size: 20px !important; /* نفس حجم الخط */
    }
    
    /* تأثير عند التمرير للموبايل */
    .ai-header-mobile-menu-item-startnow:nth-child(6) .ai-header-mobile-menu-link-startnow:hover {
      transform: translateX(8px) !important;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border-width: 2px;
      background: linear-gradient(white, white) padding-box,
                  linear-gradient(135deg, var(--primary-color), var(--accent-color)) border-box;
    }
    
    /* النص المتدرج للموبايل */
    .ai-header-mobile-menu-item-startnow:nth-child(6) .ai-header-mobile-menu-link-startnow span {
      background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-header-container-startnow {
      padding: 0 10px;
    }

    .ai-header-logo-startnow img {
      max-width: 150px;
    }

    .ai-header-logo-placeholder-startnow {
      width: 150px;
    }

    .ai-header-mobile-menu-startnow {
      width: 100%;
      max-width: 380px;
    }
  }

  /* Animation de fade-in pour les éléments du header */
  .ai-header-logo-startnow,
  .ai-header-menu-item-startnow,
  .ai-header-mobile-toggle-startnow {
    animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
.ai-footer-startnow {font-family:'Cairo',sans-serif;
  background: #3B556E;
  color: #FFFFFF;
  padding: 40px 20px 20px;
  font-family: Arial, sans-serif;
  direction: rtl;
  text-align: right;
}

.ai-footer-startnow a {font-family:'Cairo',sans-serif;
  color: #FFFFFF;
  text-decoration: none;
}

.ai-footer-startnow a:hover {font-family:'Cairo',sans-serif;
  text-decoration: underline;
}

/* ✅ FIX RTL NUMBER FLIP (PHONE / EMAIL / WHATSAPP) */
.ai-footer-ltr {font-family:'Cairo',sans-serif;
  direction: ltr !important;
  unicode-bidi: plaintext;
  display: inline-block;
  text-align: left;
}

.ai-footer-container-startnow {font-family:'Cairo',sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1.2fr 1fr 1fr;
  gap: 25px;
  align-items: start;
}

.ai-footer-column-startnow {font-family:'Cairo',sans-serif;
  min-width: 0;
}

.ai-footer-heading-startnow {font-family:'Cairo',sans-serif;
  margin: 0 0 12px;
  font-size: 18px;
  font-weight: bold;
  line-height: 1.4;
}

.ai-footer-text-startnow {font-family:'Cairo',sans-serif;
  margin: 0 0 10px;
  line-height: 1.7;
  font-size: 14px;
  opacity: 0.9;
}

.ai-footer-links-startnow a {font-family:'Cairo',sans-serif;
  display: block;
  margin: 0 0 10px;
  font-size: 14px;
  opacity: 0.9;
}

.ai-footer-links-startnow a:hover {font-family:'Cairo',sans-serif;
  opacity: 1;
}

.ai-footer-logo-startnow {font-family:'Cairo',sans-serif;
  max-width: 100%;
  height: auto;
  display: block;
  margin-bottom: 15px;
}

.ai-footer-address-startnow p {font-family:'Cairo',sans-serif;
  margin: 0 0 8px;
  font-size: 14px;
  opacity: 0.9;
}

.ai-footer-map-startnow {font-family:'Cairo',sans-serif;
  width: 100%;
  height: 220px;
  border-radius: 8px;
  overflow: hidden;
  margin-top: 15px;
  border: 1px solid rgba(255,255,255,0.15);
}

.ai-footer-map-startnow iframe {font-family:'Cairo',sans-serif;
  width: 100%;
  height: 100%;
  border: none;
}

.ai-footer-payment-icons-startnow {font-family:'Cairo',sans-serif;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 12px;
}

.ai-footer-payment-icons-startnow img {font-family:'Cairo',sans-serif;
  width: 55px;
  height: 40px;
  object-fit: contain;
  background: #3B556E;
  border-radius: 4px;
  padding: 8px;
}

.ai-footer-bottom-startnow {font-family:'Cairo',sans-serif;
  border-top: 1px solid rgba(255, 255, 255, 0.15);
  margin-top: 25px;
  padding-top: 15px;
  text-align: center;
  font-size: 13px;
  opacity: 0.75;
  font-family: "Cairo", sans-serif;
}


@media screen and (max-width: 900px) {
  .ai-footer-container-startnow {font-family:'Cairo',sans-serif;
    grid-template-columns: 1fr;
  }
}
body{font-family:'Cairo',sans-serif;}
</style>

<style>
  /* Stripe Payment Section: smoother loading */
  #payment-element-wrapper { transition: opacity .18s ease, transform .18s ease; }
  #payment-element-wrapper.is-open { opacity:1; transform:none; }

  /* Loading / ready states */
  #payment-element-wrapper[data-state="loading"] #payment-title,
  #payment-element-wrapper[data-state="loading"] #payment-footer,
  #payment-element-wrapper[data-state="loading"] #payment-element {
    opacity: 0;
    pointer-events: none;
    height: 0;
    overflow: hidden;
  }
  #payment-element-wrapper[data-state="ready"] #payment-element-loading { display: none !important; }
  #payment-element-wrapper[data-state="ready"] #payment-title,
  #payment-element-wrapper[data-state="ready"] #payment-footer,
  #payment-element-wrapper[data-state="ready"] #payment-element {
    opacity: 1;
    height: auto;
    overflow: visible;
    pointer-events: auto;
    transition: opacity .18s ease;
  }

  /* Dots loader */
  .stripe-dots {
    display: inline-flex;
    gap: 6px;
    align-items: center;
    justify-content: center;
    margin-right: 8px;
    vertical-align: middle;
  }
  .stripe-dots span{
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(0,0,0,.32);
    display:inline-block;
    animation: stripeDot 1.1s infinite ease-in-out;
  }
  .stripe-dots span:nth-child(2){ animation-delay: .15s; }
  .stripe-dots span:nth-child(3){ animation-delay: .30s; }
  @keyframes stripeDot{
    0%, 80%, 100% { transform: translateY(0); opacity: .35; }
    40% { transform: translateY(-6px); opacity: 1; }
  }

  /* Mobile polish */
  @media (max-width: 767px){
    #payment-element-wrapper{
      width: calc(100% - 16px) !important;
      margin-top: 14px !important;
      border-radius: 18px !important;
    }
    #payment-footer{ border-bottom-left-radius:18px !important; border-bottom-right-radius:18px !important; }
    #payment-title{ border-top-left-radius:18px !important; border-top-right-radius:18px !important; }
  }
</style>


<link rel="preconnect" href="https://js.stripe.com">
<link rel="dns-prefetch" href="https://js.stripe.com">
<link rel="preconnect" href="https://api.stripe.com">
<link rel="dns-prefetch" href="https://api.stripe.com">

</head>
<body>

<div class="ai-header-spacer-startnow"></div>

<header-menu-startnow class="ai-header-startnow">
  <div class="ai-header-decoration-startnow circle-1"></div>
  <div class="ai-header-decoration-startnow circle-2"></div>

  <div class="ai-header-container-startnow">
    <div class="ai-header-logo-startnow">
      <a href="https://intilakah.com/">
        <img src="https://intilakah.com/cdn/shop/files/20251207_010039_0000.png?v=1765065696&width=400" alt="Intilakah" loading="eager" />
      </a>
    </div>

    <nav class="ai-header-nav-startnow">
      <ul class="ai-header-menu-startnow">
<li class="ai-header-menu-item-startnow"><a href="https://intilakah.com/" class="ai-header-menu-link-startnow"> الصفحة الرئيسية</a></li>
<li class="ai-header-menu-item-startnow active"><a href="https://start.intilakah.com/" class="ai-header-menu-link-startnow"><span class="highlight-text">إبدأ الآن</span></a></li>
<li class="ai-header-menu-item-startnow"><a href="https://intilakah.com/pages/packs" class="ai-header-menu-link-startnow">باقاتنا</a></li>
<li class="ai-header-menu-item-startnow"><a href="https://intilakah.com/pages/about" class="ai-header-menu-link-startnow">تعرف علينا</a></li>
<li class="ai-header-menu-item-startnow"><a href="https://intilakah.com/blogs/news" class="ai-header-menu-link-startnow">مقالاتنا</a></li>
<li class="ai-header-menu-item-startnow"><a href="https://client.intilakah.com/" class="ai-header-menu-link-startnow">تسجيل الدخول</a></li>
</ul>
    </nav>

    <button class="ai-header-mobile-toggle-startnow" aria-label="فتح القائمة" aria-expanded="false">
      <div class="ai-header-hamburger-startnow">
        <span class="ai-header-hamburger-line-startnow"></span>
        <span class="ai-header-hamburger-line-startnow"></span>
        <span class="ai-header-hamburger-line-startnow"></span>
      </div>
    </button>
  </div>

  <div class="ai-header-overlay-startnow"></div>

  <div class="ai-header-mobile-menu-startnow">
    <div class="ai-header-mobile-header-startnow">
      <div class="ai-header-logo-startnow">
        <img src="https://intilakah.com/cdn/shop/files/20251207_010039_0000.png?v=1765065696&width=400" alt="Intilakah" loading="lazy" />
      </div>
    </div>

    <ul class="ai-header-mobile-menu-list-startnow">
<li class="ai-header-mobile-menu-item-startnow"><a href="https://intilakah.com/" class="ai-header-mobile-menu-link-startnow">الرئيسية</a></li>
<li class="ai-header-mobile-menu-item-startnow active"><a href="https://start.intilakah.com/" class="ai-header-mobile-menu-link-startnow"><span>إبدأ الآن</span></a></li>
<li class="ai-header-mobile-menu-item-startnow"><a href="https://intilakah.com/pages/packs" class="ai-header-mobile-menu-link-startnow">باقاتنا</a></li>
<li class="ai-header-mobile-menu-item-startnow"><a href="https://intilakah.com/pages/about" class="ai-header-mobile-menu-link-startnow">تعرف علينا</a></li>
<li class="ai-header-mobile-menu-item-startnow"><a href="https://intilakah.com/blogs/news" class="ai-header-mobile-menu-link-startnow">مقالاتنا</a></li>
<li class="ai-header-mobile-menu-item-startnow"><a href="https://client.intilakah.com/" class="ai-header-mobile-menu-link-startnow">تسجيل الدخول</a></li>
<li class="ai-header-mobile-footer-note-startnow">
        <div class="ai-header-mobile-footer-content-startnow">
          <svg class="ai-header-shield-icon-startnow" width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" fill="#666"/>
          </svg>
          <span class="ai-header-footer-text-startnow">جميع خدماتنا مقدمة من شركة Tredona LLC المسجلة في الولايات المتحدة الأمريكية.</span>
        </div>
      </li>
</ul>
  </div>
</header-menu-startnow>

<div style="height:0px"></div>
<body>
<div class="steps-process-container">
<div class="page">
<div class="section-header">
<div class="badge">
<i class="fas fa-rocket" style="margin-left: 8px;"></i>
                    رحلة العميل معنا
                </div>
<h1>خطوات العملية بعد التسجيل والدفع</h1>
<p class="subtitle">رحلة واضحة ومباشرة تنتقل خلالها من التسجيل حتى بدء المشروع، مع شفافية كاملة في كل مرحلة</p>
</div>
<section class="workflow">
<div class="process-flow">
<div class="flow-line"></div>
<div class="flow-icon">
<i class="fas fa-play"></i>
</div>
<div class="flow-line"></div>
</div>
<div class="steps">
<!-- Step 1 -->
<div class="card">
<div class="card-header">
<div class="step-num">1</div>
<div class="step-title">إدخال المعلومات واختيار الباقة المناسبة</div>
</div>
<div class="card-body">
<p>تبدأ رحلتك بملء بياناتك ومعلومات مشروعك بدقة، ثم اختيار الباقة التي تناسب احتياجاتك وميزانيتك. نحن نقدم باقات مصممة خصيصًا لمشاريع متنوعة.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                تستغرق 2-5 دقائق
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="fas fa-info-circle"></i>
                                ننصح بتوفير جميع المعلومات المطلوبة لتسريع العملية
                            </div>
</div>
</div>
<!-- Step 2 -->
<div class="card">
<div class="card-header">
<div class="step-num">2</div>
<div class="step-title">إتمام عملية الدفع الآمن</div>
</div>
<div class="card-body">
<p>ندعم وسائل دفع متنوعة وآمنة. بمجرد إتمام الدفع، ستتلقى فورًا رسالة تأكيد على بريدك الإلكتروني مع إيصال الدفع.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                تستغرق دقيقتين
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="fas fa-shield-alt"></i>
                                جميع عمليات الدفع مشفرة ومؤمنة بنظام الحماية العالمي
                            </div>
</div>
</div>
<!-- Step 3 -->
<div class="card">
<div class="card-header">
<div class="step-num">3</div>
<div class="step-title">تفعيل الحساب تلقائيًا</div>
</div>
<div class="card-body">
<p>يتم تفعيل حسابك تلقائيًا في غضون ساعة واحدة كحد أقصى بعد الدفع. ستتلقى إشعارًا بالتفعيل مع بيانات الدخول.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                خلال 60 دقيقة كحد أقصى
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="fas fa-bolt"></i>
                                عملية تلقائية بالكامل - لا حاجة للانتظار الطويل
                            </div>
</div>
</div>
<!-- Step 4 -->
<div class="card">
<div class="card-header">
<div class="step-num">4</div>
<div class="step-title">تسجيل الدخول الآمن عبر OTP</div>
</div>
<div class="card-body">
<p>استخدم نفس البريد الإلكتروني المسجل، وسيصلك رمز تحقق لمرة واحدة (OTP) للدخول إلى لوحة تحكم العميل.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                فوري بعد الطلب
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="fas fa-mobile-alt"></i>
                                حماية إضافية لحسابك من خلال التحقق بخطوتين
                            </div>
</div>
</div>
<!-- Step 5 -->
<div class="card">
<div class="card-header">
<div class="step-num">5</div>
<div class="step-title">موعد الاجتماع الأول جاهز</div>
</div>
<div class="card-body">
<p>ستجد موعد اجتماعك الأول محددًا في قسم المواعيد بلوحة التحكم، مع التفاصيل الكاملة والتوقيت المناسب لك.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                متاح بعد التفعيل مباشرة
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="far fa-calendar-check"></i>
                                يمكنك تغيير الموعد إذا لم يناسبك من لوحة التحكم
                            </div>
</div>
</div>
<!-- Step 6 - Highlighted -->
<div class="card highlight">
<div class="card-header">
<div class="step-num">6</div>
<div class="step-title">بدء العمل ومتابعة المشروع</div>
</div>
<div class="card-body">
<p>نحدد معًا رؤية المشروع وخطة العمل التفصيلية، ويمكنك متابعة التقدم خطوة بخطوة من خلال لوحة تحكم العميل.</p>
<div class="time-badge">
<i class="far fa-clock"></i> 
                                مباشرة بعد الاجتماع الأول
                            </div>
</div>
<div class="card-footer">
<div class="details">
<i class="fas fa-chart-line"></i>
                                مراقبة التقدم والجداول الزمنية بسهولة وشفافية
                            </div>
</div>
</div>
</div>
<div class="process-flow">
<div class="flow-line"></div>
<div class="flow-icon">
<i class="fas fa-flag-checkered"></i>
</div>
<div class="flow-line"></div>
</div>
</section>
</div>
</div>
<script>
        // Simple animation for cards on scroll
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.steps-process-container .card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });
            
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                observer.observe(card);
            });
            
            // Add hover effect to cards
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
<script>

  // Network dropdown change sync
  (function(){
    const sel=document.getElementById('networkSelect');
    if(!sel) return;
    sel.addEventListener('change', function(){
      const val=this.value;
      if(!val) return;
      selectedNetwork = val;
      document.querySelectorAll('.network-btn').forEach(btn=>{
        btn.classList.toggle('active', btn.textContent===val);
      });
      enableGenerateButton();
    });
  })();

</script>

<script>
/* ===== Intilakah: Create Supabase profile on payment buttons ===== */
(function () {
  function safeTrim(v) { return (v ?? "").toString().trim(); }

  function normalizePlan(p) {
    p = safeTrim(p).toLowerCase();
    if (!p) return "";
    if (p === "basic" || p.includes("basic") || p.includes("عادية") || p.includes("عاديه")) return "basic";
    if (p === "pro" || p.includes("pro") || p.includes("احتراف")) return "pro";
    if (p === "premium" || p.includes("premium") || p.includes("gold") || p.includes("ذهب")) return "premium";
    return "";
  }

  function getCustomerDataFromStorage() {
    try { return JSON.parse(localStorage.getItem("customerRegistrationData") || "null"); }
    catch (e) { return null; }
  }

  function buildCreateProfilePayload() {
    const data = getCustomerDataFromStorage();
    if (!data) throw new Error("لا توجد بيانات عميل محفوظة. الرجاء تعبئة نموذج التسجيل أولاً.");

    // ✅ mapped from Arabic keys (as stored in customerRegistrationData) to English API payload
    const firstName = safeTrim(data["الاسم"]);
    const lastName  = safeTrim(data["الاسم_الأخير"]);
    const email     = safeTrim(data["البريد_الإلكتروني"]);
    const phone     = safeTrim(data["رقم_الهاتف"]);
    const nationality = safeTrim(data["الجنسية"]);
    const residenceCountry = safeTrim(data["بلد_الإقامة"]);

    const whatsappRaw = safeTrim(data["رقم_الواتساب"]);
    const whatsapp = (whatsappRaw && whatsappRaw !== "غير محدد") ? whatsappRaw : null;

    const plan = normalizePlan(window.selectedPlan || localStorage.getItem("selectedPlan") || "");

    if (!firstName || !lastName || !email || !phone || !nationality || !residenceCountry || !plan) {
      throw new Error("بيانات ناقصة: تأكد من تعبئة التسجيل + اختيار الباقة قبل الدفع.");
    }

    return {
      first_name: firstName,
      last_name: lastName,
      email: email,
      phone: phone,
      whatsapp: whatsapp,
      nationality: nationality,
      residence_country: residenceCountry,
      plan: plan
    };
  }

  async function createProfileOnce() {
    if (localStorage.getItem("supabase_profile_created") === "1") {
      return { ok: true, skipped: true };
    }

    const payload = buildCreateProfilePayload();

    const resp = await fetch("/api/create-profile", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const out = await resp.json().catch(() => ({}));
    if (!resp.ok || !out.ok) {
      throw new Error(out?.error || "فشل إنشاء حساب العميل في النظام.");
    }

    localStorage.setItem("supabase_profile_created", "1");
    if (out?.profile?.id) localStorage.setItem("supabase_profile_id", out.profile.id);
    return out;
  }

  function bind() {
    const payNowBtn = document.getElementById("pay-now-btn");
    const confirmBtn = document.getElementById("confirmBtn");

    const handler = async () => {
      try {
        await createProfileOnce();
      } catch (e) {
        console.error(e);
        alert("تعذر إنشاء حساب العميل في النظام. الرجاء التحقق من البيانات والمحاولة مرة أخرى.\n" + (e?.message || ""));
      }
    };

    if (payNowBtn) payNowBtn.addEventListener("click", handler, { capture: true });
    if (confirmBtn) confirmBtn.addEventListener("click", handler, { capture: true });
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", bind);
  } else {
    bind();
  }
})();
</script>

</body>
<body>
<div class="gradient">
<div class="page-width">
<!-- ✅ الخطوة 1: نموذج التسجيل -->
<div class="enqulab-form-step active" id="registrationForm">
<div class="enqulab-container" style="max-width: 900px; margin: 0 auto;">
<header class="enqulab-header" style="background: linear-gradient(135deg, #0197b2 0%, #0288a1 100%); color: white; padding: 35px 30px; text-align: center; border-radius: 12px 12px 0 0;">
<div class="enqulab-header-content">
<h1 style="font-size: 32px; margin-bottom: 12px; font-weight: 700;">قم بإدخال معلوماتك بدقة</h1>
<p style="font-size: 18px; opacity: 0.95; max-width: 700px; margin: 0 auto; line-height: 1.5;">نحتاج معلوماتك لتسهيل تقديم الخدمة المتناسبة مع احتياجاتك</p>
</div>
</header>
<div class="enqulab-form-container" style="background: white; padding: 35px 30px; border-radius: 0 0 12px 12px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);">
<form action="https://submit-form.com/y8TIJgSfQ" id="customerForm" method="POST">
<input name="_honey" style="display:none;" type="text"/>
<input name="source" type="hidden" value="منصة انطلاقة - نموذج التسجيل"/>
<input id="timestamp" name="timestamp" type="hidden"/>
<!-- المعلومات الشخصية -->
<div class="enqulab-form-section" style="margin-bottom: 35px;">
<h3 style="color: #0197b2; font-size: 20px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; font-weight: 600;">المعلومات الشخصية</h3>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="firstName" style="display: block; margin-bottom: 10px; font-weight: 600; color: #545454; font-size: 15px;">الاسم <span style="color: #e74c3c;">*</span></label>
<input id="firstName" name="الاسم" placeholder="أدخل اسمك الأول" required="" style="width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;" type="text"/>
<div class="enqulab-error-message" id="firstNameError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="lastName" style="display: block; margin-bottom: 10px; font-weight: 600; color: #545454; font-size: 15px;">الاسم الأخير <span style="color: #e74c3c;">*</span></label>
<input id="lastName" name="الاسم_الأخير" placeholder="أدخل اسمك الأخير" required="" style="width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;" type="text"/>
<div class="enqulab-error-message" id="lastNameError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
</div>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="birthdate" style="display: block; margin-bottom: 10px; font-weight: 600; color: #545454; font-size: 15px;">تاريخ الميلاد <span style="color: #e74c3c;">*</span></label>
<input id="birthdate" name="تاريخ_الميلاد" required="" style="width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;" type="date"/>
<div class="enqulab-error-message" id="birthdateError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="gender" style="display: block; margin-bottom: 10px; font-weight: 600; color: #545454; font-size: 15px;">الجنس <span style="color: #e74c3c;">*</span></label>
<select id="gender" name="الجنس" required="" style="width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;">
<option value="">اختر الجنس</option>
<option value="ذكر">ذكر</option>
<option value="أنثى">أنثى</option>
<option value="أفضل عدم التحديد">أفضل عدم التحديد</option>
</select>
<div class="enqulab-error-message" id="genderError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
</div>
</div>
<!-- معلومات الاتصال -->
<div class="enqulab-form-section" style="margin-bottom: 35px;">
<h3 style="color: #0197b2; font-size: 20px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; font-weight: 600;">معلومات الاتصال</h3>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="email" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">البريد الإلكتروني <span style="color:#e74c3c;">*</span></label>
<input id="email" name="البريد_الإلكتروني" placeholder="example@domain.com" required="" style="width:100%;padding:14px 16px;border:1px solid #ddd;border-radius:8px;font-size:16px;" type="email"/>
<div class="enqulab-error-message" id="emailError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="phone" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">رقم الهاتف <span style="color:#e74c3c;">*</span></label>
<div style="position: relative;">
<span style="position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:16px;color:#555;">+</span>
<input class="ltr-input" id="phone" name="رقم_الهاتف" placeholder="966512345678" required="" style="width:100%;padding:14px 16px 14px 30px;border:1px solid #ddd;border-radius:8px;font-size:16px;direction:ltr;text-align:left;" type="tel"/>
</div>
<span style="display:block;font-size:12px;color:#666;margin-top:5px;direction:rtl;">اكتب رمز الدولة ثم الرقم (مثال: 966512345678)</span>
<div class="enqulab-error-message" id="phoneError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;direction:rtl;"></div>
</div>
</div>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="whatsapp" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">رقم الواتساب <span style="color:#7f8c8d;font-weight:normal;font-size:13px;">(اختياري)</span></label>
<div style="position: relative;">
<span style="position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:16px;color:#555;">+</span>
<input class="ltr-input" id="whatsapp" name="رقم_الواتساب" placeholder="966512345678" style="width:100%;padding:14px 16px 14px 30px;border:1px solid #ddd;border-radius:8px;font-size:16px;direction:ltr;text-align:left;" type="tel"/>
</div>
<span style="display:block;font-size:12px;color:#666;margin-top:5px;direction:rtl;">نفس تنسيق رقم الهاتف</span>
</div>
</div>
</div>
<!-- معلومات السكن والجنسية -->
<div class="enqulab-form-section" style="margin-bottom: 35px;">
<h3 style="color: #0197b2; font-size: 20px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; font-weight: 600;">معلومات السكن والجنسية</h3>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="nationality" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">الجنسية <span style="color:#e74c3c;">*</span></label>
<select id="nationality" name="الجنسية" required="" style="width:100%;padding:14px 16px;border:1px solid #ddd;border-radius:8px;font-size:16px;">
<option value="">اختر الجنسية</option>
</select>
<div class="enqulab-error-message" id="nationalityError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
<div class="enqulab-form-group" style="margin-bottom: 22px;">
<label for="residence" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">بلد الإقامة <span style="color:#e74c3c;">*</span></label>
<select id="residence" name="بلد_الإقامة" required="" style="width:100%;padding:14px 16px;border:1px solid #ddd;border-radius:8px;font-size:16px;">
<option value="">اختر بلد الإقامة</option>
</select>
<div class="enqulab-error-message" id="residenceError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
</div>
</div>
<div class="enqulab-form-row">
<div class="enqulab-form-group" style="flex:1 0 100%; margin-bottom:22px;">
<label for="address" style="display:block;margin-bottom:10px;font-weight:600;color:#545454;font-size:15px;">العنوان الكامل <span style="color:#7f8c8d;font-weight:normal;font-size:13px;">(اختياري)</span></label>
<textarea id="address" name="العنوان_الكامل" placeholder="الحي، الشارع، رقم المبنى، الشقة، المدينة..." rows="3" style="width:100%;padding:14px 16px;border:1px solid #ddd;border-radius:8px;font-size:16px;"></textarea>
</div>
</div>
</div>
<!-- الموافقة -->
<div class="enqulab-checkbox-group" style="display:flex;align-items:flex-start;margin-top:25px;padding:20px;background-color:#f9f9f9;border-radius:8px;border:1px solid #eee;">
<input id="terms" name="موافقة_الشروط" required="" style="width:auto;margin-left:15px;margin-top:4px;" type="checkbox"/>
<label for="terms" style="font-size:15px;line-height:1.5;">
                أوافق على <a href="/pages/terms" style="color:#0197b2;text-decoration:none;font-weight:600;" target="_blank">شروط الاستخدام والأحكام</a> الخاصة بمنصة انطلاقة. أقر بأن جميع المعلومات التي قدمتها صحيحة وكاملة.
              </label>
</div>
<div class="enqulab-error-message" id="termsError" style="display:none;background-color:#fde8e8;color:#c53030;padding:10px 14px;border-radius:6px;margin-top:8px;font-size:14px;border-right:3px solid #e74c3c;"></div>
<div style="display:flex;justify-content:center;margin-top:40px;padding-top:30px;border-top:1px solid #eee;">
<button id="registrationSubmitBtn" style="padding:16px 40px;font-size:18px;border-radius:8px;cursor:pointer;transition:all 0.3s;font-weight:600;border:none;display:inline-flex;align-items:center;justify-content:center;min-width:200px;background:linear-gradient(to right,#0197b2,#0288a1);color:white;" type="submit">
                التالي <i class="fas fa-arrow-left" style="margin-right:10px;"></i>
</button>
</div>
<div class="enqulab-success-message" id="registrationSuccess" style="display:none;background-color:#d4edda;color:#155724;padding:20px;border-radius:8px;margin-top:20px;text-align:center;border-right:4px solid #28a745;">
<i class="fas fa-check-circle" style="font-size:24px;margin-bottom:10px;"></i>
<h3 style="margin-bottom:10px;">تم حفظ معلوماتك بنجاح!</h3>
<p>جاري تحميل الباقات...</p>
</div>
</form>
</div>
</div>
</div>
<!-- ✅ الخطوة 2: الباقات -->
<div class="enqulab-form-step hidden" id="pricingSection">
<div class="title-wrapper center">
<h2 class="title h1">اختر الباقة المناسبة لمتجرك الإلكتروني</h2>
</div>
<div class="center">
<p class="subheading">عروضنا المميزة لبناء وتطوير متجرك الإلكتروني بالكامل</p>
</div>
<div style="text-align:center;margin-bottom:30px;">
<p style="color:#0097b2;font-size:18px;background:rgba(0,151,178,0.1);padding:15px;border-radius:10px;display:inline-block;">
<i class="fas fa-mouse-pointer" style="margin-left:8px;"></i>
          اختر الباقة المناسبة لك بالضغط عليها ثم اختر طريقة الدفع
        </p>
</div>
<div class="pricing-grid">
<div class="pricing-card" data-plan="basic" data-price="250">
<div class="pricing-card__header" style="background: linear-gradient(135deg, #000000, #333333);">
<h3 class="pricing-card__title" style="color:white !important;text-shadow:0 2px 4px rgba(0,0,0,0.5);">الباقة العادية</h3>
<div class="pricing-card__price">
<span class="price" style="color:white;">$250</span>
<span class="period" style="color:rgba(255,255,255,0.8);">/مرة واحدة</span>
</div>
</div>
<div class="pricing-card__body">
<ul class="pricing-card__features">
<li>✓ إنشاء متجر إلكتروني احترافي كامل</li>
<li>✓ تحسين ظهور المتجر على محركات البحث SEO</li>
<li>✓ تصميم الميديا الأساسية: شعار، بانرات، صور احترافية</li>
<li>✓ اجتماع أونلاين مرة أسبوعياً</li>
</ul>
</div>
<div class="pricing-card__footer">
<div class="pricing-card__notice">
<p>اضغط لاختيار هذه الباقة</p>
<p style="margin-top:10px;">بعد اتمام الدفع سيتم التواصل معكم خلال 24 ساعة</p>
</div>
</div>
</div>
<div class="pricing-card pricing-card__best-seller" data-plan="pro" data-price="600">
<div class="pricing-card__header" style="background: linear-gradient(135deg, #0097b2, #006d80);">
<h3 class="pricing-card__title" style="color:white !important;text-shadow:0 2px 4px rgba(0,0,0,0.3);">الباقة الاحترافية</h3>
<div class="pricing-card__price">
<span class="price" style="color:white;font-size:52px;">$600</span>
<span class="period" style="color:rgba(255,255,255,0.9);">/مرة واحدة</span>
</div>
</div>
<div class="pricing-card__body">
<div class="pricing-card__includes">
<span style="color:#0097b2;font-weight:bold;font-size:16px;">✓ كل ما في الباقة العادية +</span>
</div>
<ul class="pricing-card__features">
<li>✓ إنشاء شركة أمريكية كاملة</li>
<li>✓ ربط المتجر ببوابات دفع أونلاين</li>
<li>✓ اجتماعين أونلاين أسبوعياً</li>
</ul>
<div class="pricing-card__badge" style="background:#0097b2;color:white;border:2px solid white;">
<strong>الأكثر مبيعاً</strong>
</div>
</div>
<div class="pricing-card__footer">
<div class="pricing-card__notice">
<p>اضغط لاختيار هذه الباقة</p>
<p style="margin-top:10px;">بعد اتمام الدفع سيتم التواصل معكم خلال 24 ساعة</p>
</div>
</div>
</div>
<div class="pricing-card" data-plan="premium" data-price="800">
<div class="pricing-card__header" style="background: linear-gradient(135deg, #FFD700, #E6BE00);">
<h3 class="pricing-card__title" style="color:#333 !important;">الباقة الذهبية</h3>
<div class="pricing-card__price">
<span class="price" style="color:#333;">$800</span>
<span class="period" style="color:rgba(51,51,51,0.8);">/مرة واحدة</span>
</div>
</div>
<div class="pricing-card__body">
<div class="pricing-card__includes">
<span style="color:#FFD700;font-weight:bold;font-size:16px;">✓ كل ما في الباقتين السابقتين +</span>
</div>
<ul class="pricing-card__features">
<li>✓ إنشاء حساب بنكي أمريكي</li>
<li>✓ توفير بطاقات بنكية تُرسل لعنوان العميل</li>
<li>✓ متابعة يومية مخصصة</li>
<li>✓ إدارة إعلانات المنتجات</li>
<li>✓ دعم فني على مدار الساعة</li>
</ul>
</div>
<div class="pricing-card__footer">
<div class="pricing-card__notice">
<p>اضغط لاختيار هذه الباقة</p>
<p style="margin-top:10px;">بعد اتمام الدفع سيتم التواصل معكم خلال 24 ساعة</p>
</div>
</div>
</div>
</div>
<!-- ✅ زرين الدفع -->
<div class="checkout-button-container">
<button class="checkout-button" id="cardPaymentBtn">
<i class="fas fa-credit-card" style="margin-left: 10px;"></i> الدفع عبر بطاقات بنكية
        </button>
<button class="checkout-button crypto-button" id="cryptoPaymentBtn">
<i class="fab fa-bitcoin" style="margin-left: 10px;"></i> الدفع عبر العملات الرقمية
        </button>

<!-- ✅ Stripe Payment Element (يظهر تحت زر الدفع بالبطاقة) -->
<div id="payment-element-wrapper" style="display:none; width:min(980px, calc(100% - 24px)); margin:22px auto 0; background:#fff; border:2px solid #0097b2; border-radius:22px; box-shadow:0 18px 44px rgba(0,0,0,.10); overflow:visible; display:flex; flex-direction:column;" data-state="idle">
  <div id="payment-element-loading" style="padding:18px 16px; text-align:center; font-weight:800; color:#334155; background:#f8fafc; border-bottom:1px solid rgba(0,0,0,.06);">
    <span class="stripe-dots" aria-hidden="true"><span></span><span></span><span></span></span>
    جاري تحميل نموذج الدفع...
  </div>

  <div id="payment-title" style="padding:14px 16px; font-weight:900; color:#0f172a; border-bottom:1px solid rgba(0,0,0,.06); background:#fff; display:flex; align-items:center; justify-content:space-between; gap:12px; border-top-left-radius:22px; border-top-right-radius:22px;">
  <span>بيانات الدفع</span>
  <span id="stripe-amount" style="font-weight:900; color:#0097b2; white-space:nowrap;"></span>
</div>

  <!-- منطقة قابلة للتمرير لمحتوى Stripe -->
  <div style="padding:14px 16px 6px;">
    <div id="payment-element"></div>
  </div>

  <!-- شريط سفلي ثابت للزر + الأخطاء -->
  <div id="payment-footer" style="position:relative; background:#ffffff; padding:14px 16px 16px; border-top:1px solid rgba(0,0,0,.06); border-bottom-left-radius:22px; border-bottom-right-radius:22px;">
    <button id="pay-now-btn" class="checkout-button" type="button" style="width:100%; margin-top:4px;">تأكيد الدفع</button>
    <div id="cardRedirectLoader" class="crypto-redirect-loader" style="display:none; justify-content:center; margin-top:12px;">
      <span class="crypto-spinner" aria-hidden="true"></span>
      <span class="crypto-loading-text">جارٍ تحويلك إلى صفحة التأكيد…</span>
    </div>

    <div id="payment-error" style="display:none; margin-top:10px; color:#df1b41; font-weight:800;"></div>
  </div>
</div>
</div>

<!-- ✅ قسم الدفع بالعملات الرقمية (مطابق للكود الثاني) -->
<div class="crypto-section" id="cryptoSection">
<div class="section-header">
<h2>إتمام الدفع بالعملات الرقمية</h2>
<p>اختر عملتك وأكمل عملية الدفع بسهولة وأمان</p>
</div>
<div class="form-group">
<label for="cryptoEmail">البريد الإلكتروني</label>
<input id="cryptoEmail" placeholder="أدخل بريدك الإلكتروني هنا" required="" type="email"/>
<div class="error" id="cryptoEmailError">الرجاء إدخال بريد إلكتروني صالح</div>
</div>
<div class="form-group">
<label>اختر العملة الرقمية للدفع</label>
<div class="crypto-options">
<div class="crypto-option" data-crypto="BTC" id="cryptoBTC">
<img alt="Bitcoin" class="crypto-logo" src="https://cryptologos.cc/logos/bitcoin-btc-logo.png?v=040"/>
<div class="crypto-name">Bitcoin</div>
</div>
<div class="crypto-option" data-crypto="USDT" id="cryptoUSDT">
<img alt="Tether" class="crypto-logo" src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=040"/>
<div class="crypto-name">USDT</div>
</div>
<div class="crypto-option" data-crypto="ETH" id="cryptoETH">
<img alt="Ethereum" class="crypto-logo" src="https://cryptologos.cc/logos/ethereum-eth-logo.png?v=040"/>
<div class="crypto-name">Ethereum</div>
</div>
<div class="crypto-option" data-crypto="SOL" id="cryptoSOL">
<img alt="Solana" class="crypto-logo" src="https://cryptologos.cc/logos/solana-sol-logo.png?v=040"/>
<div class="crypto-name">Solana</div>
</div>
<div class="crypto-option" data-crypto="BNB" id="cryptoBNB">
<img alt="BNB" class="crypto-logo" src="https://cryptologos.cc/logos/bnb-bnb-logo.png?v=040"/>
<div class="crypto-name">BNB</div>
</div>
</div>
<div class="error" id="cryptoError">الرجاء اختيار عملة رقمية</div>
</div>
<div class="form-group" id="networkSelection" style="display:none;">
<label>اختر شبكة التحويل</label>

<div id="networkSelectWrap" style="width:100%;margin-top:10px;">
  <select id="networkSelect" class="country-select" style="width:100%;font-family:'Cairo',sans-serif;">
    <option value="">اختر الشبكة</option>
  </select>
</div>
<div class="network-options" id="networkOptions" style="display:none;"></div>

</div>
<button class="generate-btn" id="generateBtn">
<span id="generateBtnText">توليد عنوان الدفع</span>
<span id="generateBtnLoading" style="display:none; margin-right:10px;"><i class="fas fa-spinner fa-spin"></i></span>
</button>
<div class="payment-details" id="paymentDetails">
<div class="detail-row">
<div class="detail-label">الباقة المختارة:</div>
<div class="detail-value" id="selectedPlan">-</div>
</div>
<div class="detail-row">
<div class="detail-label">السعر بالدولار:</div>
<div class="detail-value" id="usdPrice">$0.00</div>
</div>
<div class="detail-row">
<div class="detail-label">العملة المختارة:</div>
<div class="detail-value" id="selectedCrypto">-</div>
</div>
<div class="detail-row" id="networkRow">
<div class="detail-label">شبكة التحويل:</div>
<div class="detail-value" id="selectedNetwork">-</div>
</div>
<div class="detail-row">
<div class="detail-label">المبلغ المطلوب:</div>
<div class="detail-value crypto-amount" id="cryptoAmount">0 <span id="cryptoIcon"></span></div>
</div>
</div>
<div class="qr-code-container" id="qrContainer">
<div style="font-weight:600;margin-bottom:15px;color:#2c3e50;">مسح رمز QR للدفع</div>
<div class="qr-code">
<img alt="QR Code" id="qrImage" src=""/>
</div>
<div style="margin-top:15px;font-size:0.9rem;color:#666;">
            يمكنك مسح رمز QR مباشرة أو نسخ العنوان أدناه
          </div>
</div>
<div class="address-container" id="addressContainer">
<div class="address-header">
<label for="cryptoAddress">عنوان المحفظة</label>
<button class="copy-btn" onclick="copyAddress()">نسخ العنوان</button>
</div>
<div class="address-box">
<input id="cryptoAddress" readonly="" type="text" value=""/>
</div>
</div>
<div class="network-info" id="networkInfo">
          الشبكة الحالية: <strong id="currentNetworkText">-</strong>
</div>
<div class="address-warning" id="addressWarning">
          ⚠️ الرجاء إرسال <strong id="exactAmountText">-</strong> بالضبط وعلى نفس الشبكة لتجنب ضياع الأموال.
        </div>
<div class="action-buttons" id="actionButtons">
<button class="confirm-btn" id="confirmBtn">تم إجراء الدفع</button>
<button class="reset-btn" id="resetBtn">إعادة تعيين</button>
</div>
<div class="confirmation-message" id="confirmationMessage" style="display:none;">
          ✅ تم استلام طلبك بنجاح!<br/>
          سيتم مراجعة الدفع والتواصل معك خلال 24 ساعة.<br/><br/>
          البريد: <strong id="userEmail"></strong><br/>
          رقم العملية: <strong id="transactionId"></strong>
</div>
<div id="cryptoRedirectLoader" class="crypto-redirect-loader" style="display:none;">
  <span class="crypto-spinner" aria-hidden="true"></span>
  <span class="crypto-loading-text">جارٍ تحويلك إلى صفحة التأكيد…</span>
</div>

<div class="success" id="successMessage"></div>
<div class="error-general" id="generalError"></div>
</div>
<div class="pricing-disclaimer center" style="margin-top:40px;padding:25px;background:rgba(0,151,178,0.1);border-radius:12px;border-left:5px solid #0097b2;margin-bottom:40px;">
<p style="color:#0097b2;margin:0;font-size:16px;line-height:1.6;">
<strong>📞 ملاحظة هامة:</strong> بعد اتمام الدفع سيتم التواصل معكم خلال 24 ساعة عبر الهاتف أو الواتساب من قبل أحد خبرائنا لعقد أول اجتماع لبدأ العمل
        </p>
</div>
<div style="text-align:center;margin-top:30px;margin-bottom:40px;">
<button class="button" id="backToFormBtn" style="background-color:#6c757d;color:white;padding:12px 24px;border:none;border-radius:8px;cursor:pointer;">
<i class="fas fa-arrow-right"></i> العودة لتعديل المعلومات
        </button>
</div>
</div>
</div>
</div>

</body>

<footer class="ai-footer-startnow">
  <div class="ai-footer-container-startnow">
    <div class="ai-footer-column-startnow">
      <img src="https://intilakah.com/cdn/shop/files/Untitled_design_11.png?v=1765041479&width=400" alt="Intilakah" class="ai-footer-logo-startnow" style="width:150px" loading="lazy">
      <div class="ai-footer-text-startnow">
        منصة انطلاقة المملوكة بالكامل من قبل TREDONA LLC  هي مساحة متخصصة لمساعدة رواد الأعمال من خلال توفير حلول احترافية لفتح الشركات الأمريكية، وإنشاء الحسابات البنكية التجارية، وتصميم المتاجر الإلكترونية، مع توجيه وخبرة تجعل بداية المشروع أكثر قوة واستقلالية.
      </div>
    </div>

    <div class="ai-footer-column-startnow">
      <h3 class="ai-footer-heading-startnow">تواصل معنا</h3>
      <div class="ai-footer-address-startnow">
        <p class="ai-footer-ltr" dir="ltr">8206 Louisiana Blvd NE Albuquerque</p>
        <p class="ai-footer-ltr" dir="ltr">87113 New Mexico USA</p>
        <p>📞 الهاتف : <a class="ai-footer-ltr" dir="ltr" href="tel:+12513844421">+1 251 384 4421</a></p>
        <p>💬 الواتساب : <a class="ai-footer-ltr" dir="ltr" target="_blank" href="https://wa.me/447400753686">+44 7400 753686</a></p>
        <p>✉️ البريد: <a class="ai-footer-ltr" dir="ltr" href="mailto:contact@intilakah.com">contact@intilakah.com</a></p>
      </div>

      <div class="ai-footer-map-startnow">
        <iframe src="https://www.google.com/maps?q=8206%20Louisiana%20Blvd%20NE%20Albuquerque%2087113%20New%20Mexico%20USA&output=embed" loading="lazy"></iframe>
      </div>
    </div>

    <div class="ai-footer-column-startnow">
      <h3 class="ai-footer-heading-startnow">روابط سريعة</h3>
      <div class="ai-footer-links-startnow">
        <a href="https://intilakah.com/en/pages/terms">الشروط والأحكام</a>
        <a href="https://intilakah.com/en/pages/contact-us">تواصل معنا</a>
        <a href="https://intilakah.com/en/pages/faq">الأسئلة الشائعة</a>
      </div>

      <h3 class="ai-footer-heading-startnow" style="margin-top:18px;">طرق الدفع</h3>
      <div class="ai-footer-payment-icons-startnow">
        <img src="https://intilakah.com/cdn/shop/files/bitcoin_black_logo_icon_147156.webp?v=1766024940&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_16.png?v=1765061641&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_18.png?v=1765062791&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_15.png?v=1765061641&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_22.png?v=1765064647&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_21.png?v=1765064518&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/Untitled_design_14.png?v=1765061641&width=120" alt="payment">
        <img src="https://intilakah.com/cdn/shop/files/ho5TE.png?v=1766088105&width=120" alt="payment">
      </div>
    </div>
  </div>

  <div class="ai-footer-bottom-startnow">
    منصة إنطلاقة © 2026 جميع الحقوق محفوظة
  </div>
</footer>


<script>
(function() {
  class HeaderMenustartnow extends HTMLElement {
    constructor() {
      super();
      this.lastScroll = 0;
      this.scrollThreshold = 100;
    }
    connectedCallback() {
      this.mobileToggle = this.querySelector('.ai-header-mobile-toggle-startnow');
      this.mobileMenu = this.querySelector('.ai-header-mobile-menu-startnow');
      this.overlay = this.querySelector('.ai-header-overlay-startnow');
      this.header = this.querySelector('.ai-header-startnow') || document.querySelector('.ai-header-startnow');
      this.setupEventListeners();
      this.setupScrollEffect();
      this.setupActiveLinks();
      this.setupColorVariables();
    }
    setupEventListeners() {
      this.mobileToggle.addEventListener('click', () => this.toggleMobileMenu());
      this.overlay.addEventListener('click', () => this.closeMobileMenu());
      this.querySelectorAll('.ai-header-mobile-menu-link-startnow').forEach(link => {
        link.addEventListener('click', () => this.closeMobileMenu());
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && this.mobileMenu.classList.contains('active')) this.closeMobileMenu();
      });
    }
    setupColorVariables() {
      const hexToRgb = (hex) => {
        hex = hex.replace('#', '');
        const r = parseInt(hex.substring(0,2), 16);
        const g = parseInt(hex.substring(2,4), 16);
        const b = parseInt(hex.substring(4,6), 16);
        return `${r}, ${g}, ${b}`;
      };
      const primary = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim() || '#1a99a7';
      const accent = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim() || '#3B556E';
      document.documentElement.style.setProperty('--primary-color-rgb', hexToRgb(primary));
      document.documentElement.style.setProperty('--accent-color-rgb', hexToRgb(accent));
    }
    setupActiveLinks() {
      // Start Now active fixed for this host:
      this.querySelectorAll('.ai-header-menu-item-startnow').forEach(li => li.classList.remove('active'));
      this.querySelectorAll('.ai-header-mobile-menu-item-startnow').forEach(li => li.classList.remove('active'));
      const desktop = this.querySelectorAll('.ai-header-menu-item-startnow')[4];
      const mobile = this.querySelectorAll('.ai-header-mobile-menu-item-startnow')[4];
      if (desktop) desktop.classList.add('active');
      if (mobile) mobile.classList.add('active');
    }
    toggleMobileMenu() {
      this.mobileMenu.classList.contains('active') ? this.closeMobileMenu() : this.openMobileMenu();
    }
    openMobileMenu() {
      this.mobileMenu.classList.add('active');
      this.overlay.classList.add('active');
      this.mobileToggle.classList.add('active');
      this.mobileToggle.setAttribute('aria-expanded', 'true');
      document.body.style.overflow = 'hidden';
    }
    closeMobileMenu() {
      this.mobileMenu.classList.remove('active');
      this.overlay.classList.remove('active');
      this.mobileToggle.classList.remove('active');
      this.mobileToggle.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }
    setupScrollEffect() {
      let ticking=false;
      const update=() => {
        if(!this.header) { ticking=false; return; }
        const current = window.pageYOffset;
        const direction = current > this.lastScroll ? 'down' : 'up';
        if (current>50) this.header.classList.add('scrolled'); else this.header.classList.remove('scrolled');
        if (current>this.scrollThreshold && direction==='down') this.header.classList.add('hidden'); else this.header.classList.remove('hidden');
        this.lastScroll=current; ticking=false;
      };
      window.addEventListener('scroll', () => {
        if(!ticking) {
          window.requestAnimationFrame(update); ticking=true;
        }
      });
      update();
    }
  }
  customElements.define('header-menu-startnow', HeaderMenustartnow);
})();
</script>

<script src="https://js.stripe.com/v3/"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {

  /* ==========================================================
     ✅ الجزء الأول: الفورم + الباقات
     ========================================================== */
  const registrationForm = document.getElementById('registrationForm');
  const pricingSection = document.getElementById('pricingSection');
  const backToFormBtn = document.getElementById('backToFormBtn');
  const registrationSubmitBtn = document.getElementById('registrationSubmitBtn');
  const registrationSuccess = document.getElementById('registrationSuccess');
  const customerForm = document.getElementById('customerForm');

  // عند تعديل أي معلومة في النموذج: أخفِ الدفع بالبطاقة حتى يُعاد فتحه بالطلب الجديد
  if(customerForm){
    customerForm.addEventListener('input', function(){
      resetCardPaymentSection();
    });
    customerForm.addEventListener('change', function(){
      resetCardPaymentSection();
    });
  }


  const cardPaymentBtn = document.getElementById('cardPaymentBtn');
  const cryptoPaymentBtn = document.getElementById('cryptoPaymentBtn');

  let selectedPlan = null;
  let selectedPlanPrice = null;

  const paymentLinks = {
    basic: "https://buy.stripe.com/dRmbJ15gx0pn31s5eVbsc00",
    pro: "https://buy.stripe.com/9B614n6kB2xv6dE6iZbsc01",
    premium: "https://buy.stripe.com/aFa28rbEVc8531s0YFbsc02"
  };

  // =============================
  // ✅ Stripe Embedded Checkout
  // =============================
  // ملاحظة: لا تضع Secret Key هنا أبداً (يكون فقط في API داخل Vercel)
  const STRIPE_PUBLISHABLE_KEY = (window.STRIPE_PUBLISHABLE_KEY || "pk_live_51SZgVvI9ApLCV3DSRYCJGnIMmcgo5abRmQMeueWepxDk3iatJ7WCP5WN0SlNJHn78QmuMdAMD4lwdBXbxcwuZL0G00Zu1hF1vg");
  const stripe = Stripe(STRIPE_PUBLISHABLE_KEY, { locale: 'ar' });

  let elements = null;


  // توحيد أسماء الباقات بين الواجهة والـ API
  function mapPlanKey(planKey){
    const map = { basic: 'basic', premium: 'advanced', pro: 'golden' };
    return map[planKey] || planKey;
  }

async function startPaymentElement(plan, btnEl){
  const wrapper = document.getElementById('payment-element-wrapper');
  const mountPoint = document.getElementById('payment-element');
  const loading = document.getElementById('payment-element-loading');
  const errorBox = document.getElementById('payment-error');

  if(!wrapper || !mountPoint) return alert('مكان الدفع غير موجود في الصفحة.');

  // إظهار مكان الدفع مباشرة تحت الأزرار
  wrapper.style.display = 'block';
  wrapper.scrollIntoView({behavior:'smooth', block:'center'});

  // لودر بسيط داخل المكان
  loading.style.display = 'block';
  loading.textContent = 'جاري تحميل نموذج الدفع...';
  if(errorBox){
    errorBox.style.display = 'none';
    errorBox.textContent = '';
  }

  // تعطيل زر البطاقة أثناء التحميل
  const oldHtml = btnEl ? btnEl.innerHTML : '';
  if(btnEl){
    btnEl.disabled = true;
    btnEl.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-left:10px;"></i> جاري تجهيز الدفع...';
  }

  try{
    if(!plan) throw new Error('يرجى اختيار باقة أولاً.');

    // 1) اطلب clientSecret من API الجديد
    const resp = await fetch('/api/create-payment-intent', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ plan: mapPlanKey(plan) })
    });

    const data = await resp.json();
    if(!resp.ok || data.error) throw new Error(data.error || 'فشل إنشاء عملية الدفع');

      // عرض المبلغ القادم من الخادم (من Stripe)
      try {
        const amtEl = document.getElementById('stripe-amount');
        if (amtEl) {
          if (typeof data.amount === 'number' && data.currency) {
            const formatted = new Intl.NumberFormat('ar', { style: 'currency', currency: String(data.currency).toUpperCase() }).format(data.amount / 100);
            amtEl.textContent = formatted;
          } else {
            amtEl.textContent = '';
          }
        }
      } catch(e) {}


    // 2) Appearance API (تخصيص الشكل)
    const appearance = {
      theme: 'stripe',
      variables: {
        colorPrimary: '#0097b2',
        colorBackground: '#ffffff',
        colorText: '#121212',
        colorDanger: '#df1b41',
        fontFamily: 'Cairo, system-ui, sans-serif',
        borderRadius: '12px',
        spacingUnit: '4px',
      },
      rules: {
        '.Input': { padding: '12px' },
        '.Label': { fontWeight: '700' },
      }
    };

    // 3) تهيئة Elements ثم إنشاء Payment Element
    elements = stripe.elements({
      clientSecret: data.clientSecret,
      locale: 'ar',
      appearance,
      fonts: [{ cssSrc: 'https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap' }]
    });
    const paymentElement = elements.create('payment');

    // تنظيف mount ثم العرض
    mountPoint.innerHTML = '';
    paymentElement.mount('#payment-element');

    loading.style.display = 'none';

    const payNowBtn = document.getElementById('pay-now-btn');
    if(payNowBtn){
      payNowBtn.disabled = false;
      payNowBtn.style.display = 'block';
    }
  }catch(err){
    console.error(err);
    if(errorBox){
      errorBox.style.display = 'block';
      errorBox.textContent = err.message || 'حدث خطأ أثناء تجهيز الدفع';
    }else{
      alert(err.message || 'حدث خطأ');
    }
    loading.style.display = 'none';
  }finally{
    if(btnEl){
      btnEl.disabled = false;
      btnEl.innerHTML = oldHtml;
    }
  }
}


// إخفاء/تصفير قسم الدفع بالبطاقة (عند تغيير أي شيء أو الضغط خارج القسم)
function resetCardPaymentSection(){
  const wrapper = document.getElementById('payment-element-wrapper');
  const mountPoint = document.getElementById('payment-element');
  const loading = document.getElementById('payment-element-loading');
  const errorBox = document.getElementById('payment-error');
  const payBtn = document.getElementById('pay-now-btn');

  if(wrapper){
    wrapper.style.display = 'none';
    wrapper.setAttribute('data-state','idle');
  }
  if(mountPoint) mountPoint.innerHTML = '';
  if(loading){
    loading.style.display = 'none';
    loading.innerHTML = '<span class="stripe-dots" aria-hidden="true"><span></span><span></span><span></span></span> جاري تحميل نموذج الدفع...';
  }
  if(errorBox){
    errorBox.style.display = 'none';
    errorBox.textContent = '';
  }
  if(payBtn){
    payBtn.disabled = true;
  }

  // تصفير عناصر Stripe حتى نعيد بناءها بشكل صحيح
  elements = null;
}

// عند أي نقرة خارج صندوق Stripe: أخفِ القسم
document.addEventListener('click', function(e){
  const wrapper = document.getElementById('payment-element-wrapper');
  if(!wrapper || wrapper.style.display === 'none') return;

  const clickedInside = wrapper.contains(e.target);

  // استثناء: زر البطاقة نفسه أو زر الكريبتو أو عناصر اختيار الباقة (حتى لا يختفي قبل ما نتعامل)
  const cardBtn = document.getElementById('cardPaymentBtn');
  const cryptoBtn = document.getElementById('cryptoPaymentBtn');

  const isCardBtn = cardBtn && (e.target === cardBtn || cardBtn.contains(e.target));
  const isCryptoBtn = cryptoBtn && (e.target === cryptoBtn || cryptoBtn.contains(e.target));

  // أي عنصر مرتبط باختيار باقة أو تعديلها (زر/كرت/راديو)
  const isPlanControl = e.target.closest && e.target.closest('.pricing-card, .plan-card, [data-plan], input[name="plan"], input[name="package"]');

  if(!clickedInside && !isCardBtn && !isCryptoBtn && !isPlanControl){
    resetCardPaymentSection();
  }
}, true);

// زر "ادفع الآن" داخل نموذج الدفع
const payNowBtn = document.getElementById('pay-now-btn');
if(payNowBtn){
  payNowBtn.addEventListener('click', async function(){
    // ✅ واجهة: أظهر لودر بسيط أثناء معالجة الدفع
    const cardLoader2 = document.getElementById('cardRedirectLoader');
    if (cardLoader2) cardLoader2.style.display = 'flex';

    payNowBtn.disabled = true;
    const oldText = payNowBtn.innerHTML;
    payNowBtn.innerHTML = 'جاري تأكيد الدفع...';

    const { error } = await stripe.confirmPayment({
      elements,
      confirmParams: {
        // ✅ التحويل إلى صفحة التأكيد يتم فقط عند نجاح Stripe
        return_url: `${window.location.origin}/confirmation.html`,
      }
    });

    // إذا كان هناك خطأ (فشل الدفع) لن يتم التحويل
    if (error) {
      if (cardLoader2) cardLoader2.style.display = 'none';
      payNowBtn.disabled = false;
      payNowBtn.innerHTML = oldText;

      if (errorBox) {
        errorBox.style.display = 'block';
        errorBox.textContent = error.message || 'تعذر إتمام الدفع. حاول مرة أخرى.';
      } else {
        alert(error.message || 'تعذر إتمام الدفع. حاول مرة أخرى.');
      }
    }
    // في حالة النجاح، Stripe سيحوّل تلقائيًا إلى return_url.
  });const cardLoader2 = document.getElementById('cardRedirectLoader');
      if (cardLoader2) cardLoader2.style.display = 'none';

    if(error){
      if(errorBox){
        errorBox.style.display = 'block';
        errorBox.textContent = error.message;
      }else{
        alert(error.message);
      }
    }

    payNowBtn.disabled = false;
    payNowBtn.innerHTML = oldText;
  });
}

  const arabCountries = ["السعودية","الإمارات العربية المتحدة","قطر","الكويت","البحرين","عُمان","العراق","الأردن","سوريا","لبنان","فلسطين","اليمن","مصر","السودان","ليبيا","تونس","الجزائر","المغرب","موريتانيا","جيبوتي","الصومال","جزر القمر"];
  const turkey = ["تركيا"];
  const europeanCountries = ["ألبانيا","أندورا","أرمينيا","النمسا","أذربيجان","بيلاروسيا","بلجيكا","البوسنة والهرسك","بلغاريا","كرواتيا","قبرص","جمهورية التشيك","الدنمارك","إستونيا","فنلندا","فرنسا","جورجيا","ألمانيا","اليونان","المجر","آيسلندا","أيرلندا","إيطاليا","لاتفيا","ليختنشتاين","ليتوانيا","لوكسمبورغ","مالطا","مولدوفا","موناكو","الجبل الأسود","هولندا","شمال مقدونيا","النرويج","بولندا","البرتغال","رومانيا","روسيا","سان مارينو","صربيا","سلوفاكيا","سلوفينيا","إسبانيا","السويد","سويسرا","أوكرانيا","المملكة المتحدة","الفاتيكان"];
  const importantCountries = ["كندا","الولايات المتحدة الأمريكية"];
  const otherCountries = ["أفغانستان","أنغولا","أنتيغوا وباربودا","الأرجنتين","أستراليا","جزر الباهاماس","بنغلاديش","بربادوس","بنين","بوتان","بوليفيا","بوتسوانا","البرازيل","بروناي","بوركينا فاسو","بوروندي","الرأس الأخضر","كمبوديا","الكاميرون","جمهورية أفريقيا الوسطى","تشاد","تشيلي","الصين","كولومبيا","الكونغو","الكونغو الديمقراطية","كوستاريكا","كوبا","دومينيكا","جمهورية الدومينيكان","تيمور الشرقية","الإكوادور","السلفادور","غينيا الاستوائية","إريتريا","إسواتيني","إثيوبيا","فيجي","الغابون","غامبيا","غانا","غرينادا","غواتيمالا","غينيا","غينيا بيساو","غويانا","هايتي","هندوراس","الهند","إندونيسيا","إيران","إسرائيل","ساحل العاج","جامايكا","اليابان","كازاخستان","كينيا","كيريباتي","قيرغيزستان","لاوس","ليسوتو","ليبيريا","مدغقر","ملاوي","ماليزيا","جزر المالديف","مالي","جزر مارشال","موريشيوس","المكسيك","ميكرونيزيا","منغوليا","موزمبيق","ميانمار","ناميبيا","ناورو","نيبال","نيوزيلندا","نيكاراغوا","النيجر","نيجيريا","كوريا الشمالية","باكستان","بالاو","بنما","بابوا غينيا الجديدة","باراغواي","بيرو","الفلبين","رواندا","سانت كيتس ونيفيس","سانت لوسيا","سانت فنسنت والغرينادين","ساموا","ساو تومي وبرينسيبي","السنغال","سيشيل","سيراليون","سنغافورة","جزر سليمان","جنوب أفريقيا","كوريا الجنوبية","جنوب السودان","سريلانكا","سورينام","طاجيكستان","تنزانيا","تايلاند","توغو","تونغا","ترينيداد وتوباغو","تركمانستان","توفالو","أوغندا","أوروغواي","أوزبكستان","فانواتو","فنزويلا","فيتنام","زامبيا","زيمبابوي","تايوان","كوسوفو"];

  const nationalitySelect = document.getElementById('nationality');
  const residenceSelect = document.getElementById('residence');

  function addOptionGroup(select, label) {
    const group = document.createElement('optgroup');
    group.label = label;
    select.appendChild(group);
    return group;
  }
  function addCountriesToGroup(group, countries) {
    countries.sort((a, b) => a.localeCompare(b));
    countries.forEach(country => {
      const option = document.createElement('option');
      option.value = country;
      option.textContent = country;
      group.appendChild(option);
    });
  }

  addCountriesToGroup(addOptionGroup(nationalitySelect, 'الدول العربية'), arabCountries);
  addCountriesToGroup(addOptionGroup(nationalitySelect, 'تركيا'), turkey);
  addCountriesToGroup(addOptionGroup(nationalitySelect, 'الدول الأوروبية'), europeanCountries);
  addCountriesToGroup(addOptionGroup(nationalitySelect, 'كندا والولايات المتحدة'), importantCountries);
  addCountriesToGroup(addOptionGroup(nationalitySelect, 'بقية دول العالم'), otherCountries);

  addCountriesToGroup(addOptionGroup(residenceSelect, 'الدول العربية'), arabCountries);
  addCountriesToGroup(addOptionGroup(residenceSelect, 'تركيا'), turkey);
  addCountriesToGroup(addOptionGroup(residenceSelect, 'الدول الأوروبية'), europeanCountries);
  addCountriesToGroup(addOptionGroup(residenceSelect, 'كندا والولايات المتحدة'), importantCountries);
  addCountriesToGroup(addOptionGroup(residenceSelect, 'بقية دول العالم'), otherCountries);

  const otherOptionNat = document.createElement('option');
  otherOptionNat.value = 'other';
  otherOptionNat.textContent = 'دولة أخرى';
  nationalitySelect.appendChild(otherOptionNat);

  const otherOptionRes = document.createElement('option');
  otherOptionRes.value = 'other';
  otherOptionRes.textContent = 'دولة أخرى';
  residenceSelect.appendChild(otherOptionRes);

  let otherNationalityInput = null;
  let otherResidenceInput = null;

  nationalitySelect.addEventListener('change', function() {
    if (this.value === 'other') {
      if (!otherNationalityInput) {
        otherNationalityInput = document.createElement('input');
        otherNationalityInput.type = 'text';
        otherNationalityInput.name = 'الجنسية_أخرى';
        otherNationalityInput.placeholder = 'يرجى كتابة الجنسية';
        otherNationalityInput.required = true;
        otherNationalityInput.style.cssText = 'width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; margin-top: 10px;';
        this.parentNode.appendChild(otherNationalityInput);
      }
    } else if (otherNationalityInput) {
      otherNationalityInput.remove();
      otherNationalityInput = null;
    }
  });

  residenceSelect.addEventListener('change', function() {
    if (this.value === 'other') {
      if (!otherResidenceInput) {
        otherResidenceInput = document.createElement('input');
        otherResidenceInput.type = 'text';
        otherResidenceInput.name = 'بلد_الإقامة_أخرى';
        otherResidenceInput.placeholder = 'يرجى كتابة بلد الإقامة';
        otherResidenceInput.required = true;
        otherResidenceInput.style.cssText = 'width: 100%; padding: 14px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; margin-top: 10px;';
        this.parentNode.appendChild(otherResidenceInput);
      }
    } else if (otherResidenceInput) {
      otherResidenceInput.remove();
      otherResidenceInput = null;
    }
  });

  const birthdateInput = document.getElementById('birthdate');
  birthdateInput.max = new Date().toISOString().split('T')[0];

  function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }
  function validatePhone(phone) {
    const re = /^\d{5,15}$/;
    return re.test(phone.replace(/\s/g, ''));
  }
  function formatPhoneForSubmission(phone) {
    let phoneNum = phone.replace(/\s/g, '');
    phoneNum = phoneNum.replace(/^\+/, '');
    return '+' + phoneNum;
  }
  function formatPhoneInput(value) { return value.replace(/[^\d]/g, ''); }

  function resetErrorMessages() {
    document.querySelectorAll('.enqulab-error-message').forEach(msg => {
      msg.style.display = 'none';
      msg.textContent = '';
    });
  }

  function validateForm() {
    let isValid = true;
    resetErrorMessages();

    if (!document.getElementById('firstName').value.trim()) {
      document.getElementById('firstNameError').textContent = 'يرجى إدخال الاسم الأول';
      document.getElementById('firstNameError').style.display = 'block';
      isValid = false;
    }
    if (!document.getElementById('lastName').value.trim()) {
      document.getElementById('lastNameError').textContent = 'يرجى إدخال الاسم الأخير';
      document.getElementById('lastNameError').style.display = 'block';
      isValid = false;
    }
    if (!document.getElementById('birthdate').value) {
      document.getElementById('birthdateError').textContent = 'يرجى اختيار تاريخ الميلاد';
      document.getElementById('birthdateError').style.display = 'block';
      isValid = false;
    }
    if (!document.getElementById('gender').value) {
      document.getElementById('genderError').textContent = 'يرجى اختيار الجنس';
      document.getElementById('genderError').style.display = 'block';
      isValid = false;
    }

    const email = document.getElementById('email');
    if (!email.value || !validateEmail(email.value)) {
      document.getElementById('emailError').textContent = 'يرجى إدخال بريد إلكتروني صحيح';
      document.getElementById('emailError').style.display = 'block';
      isValid = false;
    }

    const phoneValue = document.getElementById('phone').value.replace(/\s/g, '');
    if (!phoneValue || !validatePhone(phoneValue)) {
      document.getElementById('phoneError').textContent = 'يرجى إدخال رقم هاتف صحيح. اكتب رمز الدولة ثم الرقم (مثال: 966512345678)';
      document.getElementById('phoneError').style.display = 'block';
      isValid = false;
    }

    const nationality = document.getElementById('nationality');
    if (!nationality.value) {
      document.getElementById('nationalityError').textContent = 'يرجى اختيار الجنسية';
      document.getElementById('nationalityError').style.display = 'block';
      isValid = false;
    } else if (nationality.value === 'other' && otherNationalityInput && !otherNationalityInput.value.trim()) {
      document.getElementById('nationalityError').textContent = 'يرجى كتابة الجنسية';
      document.getElementById('nationalityError').style.display = 'block';
      isValid = false;
    }

    const residence = document.getElementById('residence');
    if (!residence.value) {
      document.getElementById('residenceError').textContent = 'يرجى اختيار بلد الإقامة';
      document.getElementById('residenceError').style.display = 'block';
      isValid = false;
    } else if (residence.value === 'other' && otherResidenceInput && !otherResidenceInput.value.trim()) {
      document.getElementById('residenceError').textContent = 'يرجى كتابة بلد الإقامة';
      document.getElementById('residenceError').style.display = 'block';
      isValid = false;
    }

    if (!document.getElementById('terms').checked) {
      document.getElementById('termsError').textContent = 'يجب الموافقة على شروط الاستخدام والأحكام';
      document.getElementById('termsError').style.display = 'block';
      isValid = false;
    }

    return isValid;
  }

  async function sendToFormspark(formData) {
    const formsparkEndpoint = 'https://submit-form.com/y8TIJgSfQ';
    try {
      // ملاحظة: عند فتح الصفحة محلياً (file://) قد يمنع المتصفح قراءة الاستجابة بسبب CORS،
      // لذلك نستخدم no-cors ونعتبر الإرسال ناجحاً إذا تم تنفيذ الطلب بدون خطأ.
      await fetch(formsparkEndpoint, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams(formData)
      });
      return true;
    } catch (error) {
      return false;
    }
  }

  function selectPricingCard(card) {
    document.querySelectorAll('.pricing-card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');

    selectedPlan = card.getAttribute('data-plan');
    window.selectedPlan = selectedPlan;
    localStorage.setItem('selectedPlan', selectedPlan);
    selectedPlanPrice = parseFloat(card.getAttribute('data-price'));

    // عند تغيير الباقة: أخفِ الدفع بالبطاقة حتى يُعاد فتحه بالطلب الجديد
    resetCardPaymentSection();

    cardPaymentBtn.style.display = 'inline-block';
    cryptoPaymentBtn.style.display = 'inline-block';

    cardPaymentBtn.innerHTML = `<i class="fas fa-credit-card" style="margin-left: 10px;"></i> الدفع عبر بطاقات بنكية ($${selectedPlanPrice})`;
    cryptoPaymentBtn.innerHTML = `<i class="fab fa-bitcoin" style="margin-left: 10px;"></i> الدفع عبر العملات الرقمية ($${selectedPlanPrice})`;

    hideCryptoSection();
  }

  function goToPricingStep() {
    registrationForm.classList.add('hidden');
    pricingSection.classList.remove('hidden');
    customerForm.classList.add('form-disabled');
    customerForm.classList.add('form-submitted');

    cardPaymentBtn.style.display = 'none';
    cryptoPaymentBtn.style.display = 'none';

    setTimeout(() => {
      pricingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 100);
  }

  function goToRegistrationStep() {
    pricingSection.classList.add('hidden');
    registrationForm.classList.remove('hidden');
    customerForm.classList.remove('form-disabled');
    registrationForm.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  customerForm.addEventListener('submit', async function(e) {
    e.preventDefault();

    if (!validateForm()) {
      const firstError = document.querySelector('.enqulab-error-message[style*="display: block"]');
      if (firstError) firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      return;
    }

    const formData = {
      الاسم: document.getElementById('firstName').value,
      الاسم_الأخير: document.getElementById('lastName').value,
      تاريخ_الميلاد: document.getElementById('birthdate').value,
      الجنس: document.getElementById('gender').value,
      البريد_الإلكتروني: document.getElementById('email').value,
      رقم_الهاتف: formatPhoneForSubmission(document.getElementById('phone').value.replace(/\s/g, '')),
      رقم_الواتساب: document.getElementById('whatsapp').value ? formatPhoneForSubmission(document.getElementById('whatsapp').value.replace(/\s/g, '')) : 'غير محدد',
      الجنسية: document.getElementById('nationality').value === 'other' && otherNationalityInput ? otherNationalityInput.value : document.getElementById('nationality').value,
      بلد_الإقامة: document.getElementById('residence').value === 'other' && otherResidenceInput ? otherResidenceInput.value : document.getElementById('residence').value,
      العنوان_الكامل: document.getElementById('address').value || 'غير محدد',
      موافقة_الشروط: 'نعم',
      source: 'منصة انطلاقة - نموذج التسجيل',
      timestamp: new Date().toISOString()
    };

    registrationSubmitBtn.disabled = true;
    registrationSubmitBtn.innerHTML = 'جاري الإرسال... <i class="fas fa-spinner fa-spin"></i>';
    // لا نظهر رسالة النجاح إلا بعد نجاح الإرسال فعلياً


    localStorage.setItem('customerRegistrationData', JSON.stringify(formData));

    
    // Reset profile-creation flags for a new registration attempt
    localStorage.removeItem('supabase_profile_created');
    localStorage.removeItem('supabase_profile_id');
    localStorage.removeItem('selectedPlan');
    window.selectedPlan = "";
const sentOk = await sendToFormspark(formData);
    if(sentOk){
      registrationSuccess.style.display = 'block';
      // اجعل الإحساس طبيعي: اترك اللودر لحظة ثم اخفِ الزر بسلاسة
      setTimeout(() => {
        registrationSubmitBtn.style.transition = 'opacity .35s ease, transform .35s ease';
        registrationSubmitBtn.style.opacity = '0';
        registrationSubmitBtn.style.transform = 'translateY(-6px)';
        setTimeout(() => { registrationSubmitBtn.style.display = 'none'; }, 380);
      }, 700);
      setTimeout(goToPricingStep, 1500);
    } else {
      registrationSubmitBtn.disabled = false;
      registrationSubmitBtn.innerHTML = 'إرسال المعلومات';
      document.getElementById('termsError').textContent = 'حدث خطأ أثناء الإرسال، حاول مرة أخرى.';
      document.getElementById('termsError').style.display = 'block';
    }
  });

  document.getElementById('phone').addEventListener('input', function() {
    this.value = formatPhoneInput(this.value);
  });
  document.getElementById('whatsapp').addEventListener('input', function() {
    this.value = formatPhoneInput(this.value);
  });

  document.querySelectorAll('.pricing-card').forEach(card => {
    card.addEventListener('click', function() {
      selectPricingCard(this);
    });
  });

  backToFormBtn.addEventListener('click', goToRegistrationStep);

  cardPaymentBtn.addEventListener('click', function() {
    if (!selectedPlan) { alert('يرجى اختيار باقة أولاً'); return; }
    startPaymentElement(selectedPlan, this);
  });

cryptoPaymentBtn.addEventListener('click', function() {
    resetCardPaymentSection();
    if (!selectedPlan) { alert('يرجى اختيار باقة أولاً'); return; }
    showCryptoSection();
  });

  document.getElementById('timestamp').value = new Date().toISOString();

  /* ==========================================================
     ✅ الجزء الثاني: Crypto (مطابق للكود الثاني مع الاعتماد على باقة الكود الأول)
     ========================================================== */
  const cryptoSection = document.getElementById('cryptoSection');

  const emailInput = document.getElementById('cryptoEmail');
  const emailError = document.getElementById('cryptoEmailError');
  const cryptoError = document.getElementById('cryptoError');
  const qrImage = document.getElementById('qrImage');
  const qrContainer = document.getElementById('qrContainer');
  const cryptoAddress = document.getElementById('cryptoAddress');
  const confirmBtn = document.getElementById('confirmBtn');
  const resetBtn = document.getElementById('resetBtn');
  const generateBtn = document.getElementById('generateBtn');
  const generateBtnText = document.getElementById('generateBtnText');
  const generateBtnLoading = document.getElementById('generateBtnLoading');
  const confirmationMessage = document.getElementById('confirmationMessage');
  
  const cryptoRedirectLoader = document.getElementById('cryptoRedirectLoader');
const addressContainer = document.getElementById('addressContainer');
  const paymentDetails = document.getElementById('paymentDetails');
  const successMessage = document.getElementById('successMessage');
  const generalError = document.getElementById('generalError');
  const userEmail = document.getElementById('userEmail');
  const transactionIdEl = document.getElementById('transactionId');
  const networkSelection = document.getElementById('networkSelection');
  const networkOptions = document.getElementById('networkOptions');
  const networkSelect = document.getElementById('networkSelect');
  if(networkSelect){
    networkSelect.addEventListener('change', function(){
      if(sectionLocked) return;
      selectedNetwork = this.value;
      // keep legacy buttons in sync if they exist
      document.querySelectorAll('.network-btn').forEach(btn=>{
        btn.classList.toggle('active', btn.dataset.network===selectedNetwork);
      });
      enableGenerateButton();
    });
  }

  const networkRow = document.getElementById('networkRow');
  const selectedNetworkEl = document.getElementById('selectedNetwork');
  const addressWarning = document.getElementById('addressWarning');
  const exactAmountText = document.getElementById('exactAmountText');
  const actionButtons = document.getElementById('actionButtons');
  const networkInfo = document.getElementById('networkInfo');
  const currentNetworkText = document.getElementById('currentNetworkText');

  const cryptoBTC = document.getElementById('cryptoBTC');
  const cryptoUSDT = document.getElementById('cryptoUSDT');
  const cryptoETH = document.getElementById('cryptoETH');
  const cryptoSOL = document.getElementById('cryptoSOL');
  const cryptoBNB = document.getElementById('cryptoBNB');

  const selectedPlanEl = document.getElementById('selectedPlan');
  const usdPriceEl = document.getElementById('usdPrice');
  const selectedCryptoEl = document.getElementById('selectedCrypto');
  const cryptoAmountEl = document.getElementById('cryptoAmount');

  let selectedCrypto = '';
  let selectedNetwork = '';
  let requiredAmount = 0;
  let transactionId = '';
  let realPrices = {};
  let pricesLoaded = false;
  let sectionLocked = false;

  const cryptoNetworks = {
    BTC: ['BTC'],
    USDT: ['ERC20', 'TRC20', 'BEP20', 'SOL'],
    ETH: ['ETH'],
    SOL: ['SOL'],
    BNB: ['BEP20']
  };

  // ✅ مطابق 100% للكود الثاني (عناوين + QR) :contentReference[oaicite:1]{index=1}
  const cryptoAddresses = {
    BTC: {
      'BTC': {
        address: '1JT7uGZgE1e6KZt49zVfTLDZnfZT5y97jH',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/BTC-BTC.png?v=1766503170'
      }
    },
    USDT: {
      'ERC20': {
        address: '0xf48fc3408b2da8fbb7f3ab478d3b977ba56b7093',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/USDT_ERC20.png?v=1766503170'
      },
      'TRC20': {
        address: 'TFQeHkzfn6DYxv8jW8s5dvb955pGYefjuv',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/USDT_TRC20.png?v=1766503170'
      },
      'SOL': {
        address: '73zrSrid6BowyjQMMqYnAUGYUt525HVmcJker5ktBzju',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/USDT_SOL.png?v=1766503170'
      },
      'BEP20': {
        address: '0xf48fc3408b2da8fbb7f3ab478d3b977ba56b7093',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/USDT_BEP20.png?v=1766503170'
      }
    },
    ETH: {
      'ETH': {
        address: '0xf48fc3408b2da8fbb7f3ab478d3b977ba56b7093',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/ETH_ETH.png?v=1766503170'
      }
    },
    SOL: {
      'SOL': {
        address: '73zrSrid6BowyjQMMqYnAUGYUt525HVmcJker5ktBzju',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/sol.png?v=1766503170'
      }
    },
    BNB: {
      'BEP20': {
        address: '0xf48fc3408b2da8fbb7f3ab478d3b977ba56b7093',
        qrCode: 'https://cdn.shopify.com/s/files/1/0693/4413/3208/files/USDT_BEP20.png?v=1766503170'
      }
    }
  };

  const USDT_PRICE = 1.00;

  // ✅ مطابق 100% للكود الثاني :contentReference[oaicite:2]{index=2}
  const cryptoLogos = {
    BTC: 'https://cryptologos.cc/logos/bitcoin-btc-logo.png?v=040',
    USDT: 'https://cryptologos.cc/logos/tether-usdt-logo.png?v=040',
    ETH: 'https://cryptologos.cc/logos/ethereum-eth-logo.png?v=040',
    SOL: 'https://cryptologos.cc/logos/solana-sol-logo.png?v=040',
    BNB: 'https://cryptologos.cc/logos/bnb-bnb-logo.png?v=040'
  };

  const planNames = {
    basic: 'الباقة العادية',
    pro: 'الباقة الاحترافية',
    premium: 'الباقة الذهبية'
  };

  function showCryptoSection() {
    cryptoSection.style.display = "block";
    // تعبئة البريد تلقائياً من الفورم الأول
    const stored = localStorage.getItem('customerRegistrationData');
    if (stored) {
      try {
        const parsed = JSON.parse(stored);
        if (parsed && parsed.البريد_الإلكتروني) emailInput.value = parsed.البريد_الإلكتروني;
      } catch(e){}
    } else {
      emailInput.value = document.getElementById('email').value || "";
    }

    resetSection();
    updateSelectedPlan();
    loadRealPrices();

    setTimeout(() => cryptoSection.scrollIntoView({ behavior: "smooth", block: "start" }), 150);
  }

  function hideCryptoSection() {
    cryptoSection.style.display = "none";
    resetSection();
  }

  function lockSection() {
    sectionLocked = true;
    emailInput.disabled = true;
    emailInput.style.background = '#f8f9fa';

    cryptoBTC.classList.add('disabled');
    cryptoUSDT.classList.add('disabled');
    cryptoETH.classList.add('disabled');
    cryptoSOL.classList.add('disabled');
    cryptoBNB.classList.add('disabled');

    document.querySelectorAll('.network-btn').forEach(btn => { btn.disabled = true; });
    generateBtn.style.display = 'none';
  }

  function unlockSection() {
    sectionLocked = false;
    emailInput.disabled = false;
    emailInput.style.background = 'white';

    cryptoBTC.classList.remove('disabled');
    cryptoUSDT.classList.remove('disabled');
    cryptoETH.classList.remove('disabled');
    cryptoSOL.classList.remove('disabled');
    cryptoBNB.classList.remove('disabled');

    document.querySelectorAll('.network-btn').forEach(btn => { btn.disabled = false; });
    enableGenerateButton();
  }

  function showNetworkOptions() {
    networkOptions.innerHTML = '';
    selectedNetwork = '';
    // dropdown UI
    const networkSelect = document.getElementById('networkSelect');
    const networkSelectWrap = document.getElementById('networkSelectWrap');
    if(networkSelect){ networkSelect.innerHTML = '<option value="">اختر الشبكة</option>'; networkSelect.value=''; }
    if(networkSelectWrap){ networkSelectWrap.style.display='none'; }

    if (selectedCrypto === 'USDT' && cryptoNetworks[selectedCrypto]) {
      if(networkSelectWrap){ networkSelectWrap.style.display='block'; }
      cryptoNetworks[selectedCrypto].forEach(network => {
        const button = document.createElement('button');
        button.className = 'network-btn';
        button.dataset.network = network;
        button.textContent = network;

        button.addEventListener('click', function() {
          if (sectionLocked) return;
          document.querySelectorAll('.network-btn').forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          selectedNetwork = network;
          enableGenerateButton();
        });

        networkOptions.appendChild(button);
        // add to dropdown
        if(networkSelect){
          const opt=document.createElement('option');
          opt.value=network;
          opt.textContent=network;
          networkSelect.appendChild(opt);
        }
      });
      networkSelection.style.display = 'block';
    } else {
      networkSelection.style.display = 'none';
      if (selectedCrypto && cryptoNetworks[selectedCrypto]) {
        selectedNetwork = cryptoNetworks[selectedCrypto][0];
        enableGenerateButton();
      }
    }
  }

  function enableGenerateButton() {
    if (sectionLocked) { generateBtn.style.display = 'none'; return; }

    const emailValid = emailInput.checkValidity();

    if (emailValid && selectedPlan && selectedCrypto) {
      if (selectedCrypto === 'USDT' && !selectedNetwork) { generateBtn.style.display = 'none'; return; }
      if (selectedCrypto !== 'USDT' && selectedCrypto && !cryptoNetworks[selectedCrypto]) { generateBtn.style.display = 'none'; return; }
      generateBtn.style.display = 'block';
      generateBtn.disabled = false;
    } else {
      generateBtn.style.display = 'none';
    }
  }

  function showSuccess(message) {
    successMessage.textContent = message;
    successMessage.style.display = 'block';
    setTimeout(() => { successMessage.style.display = 'none'; }, 3000);
  }

  function showError(message) {
    generalError.textContent = message;
    generalError.style.display = 'block';
    setTimeout(() => { generalError.style.display = 'none'; }, 5000);
  }

  function updateSelectedPlan() {
    selectedPlanEl.textContent = planNames[selectedPlan] || '-';
    usdPriceEl.textContent = selectedPlanPrice ? `$${selectedPlanPrice.toFixed(2)}` : '$0.00';
  }

  emailInput.addEventListener('input', function() {
    if (sectionLocked) return;
    const emailValid = emailInput.checkValidity();
    if (emailValid) {
      emailError.style.display = 'none';
      emailInput.style.borderColor = '#2ecc71';
      emailInput.style.background = '#f8fff8';
    } else {
      emailInput.style.borderColor = '#e74c3c';
      emailInput.style.background = '#fff8f8';
    }
    enableGenerateButton();
  });

  async function loadRealPrices() {
    realPrices.USDT = USDT_PRICE;
    try {
      const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,binancecoin,solana&vs_currencies=usd', {
        method: 'GET', headers: { 'Accept': 'application/json' }
      });

      if (response.ok) {
        const data = await response.json();
        if (data.bitcoin && data.bitcoin.usd) realPrices.BTC = data.bitcoin.usd;
        if (data.ethereum && data.ethereum.usd) realPrices.ETH = data.ethereum.usd;
        if (data.binancecoin && data.binancecoin.usd) realPrices.BNB = data.binancecoin.usd;
        if (data.solana && data.solana.usd) realPrices.SOL = data.solana.usd;
        pricesLoaded = true;
      } else {
        throw new Error('فشل في جلب الأسعار الحقيقية');
      }
    } catch (error) {
      pricesLoaded = false;
    }
  }

  function calculateRequiredAmount() {
    if (!selectedCrypto || !selectedPlanPrice) return;

    let currentPrice;

    if (selectedCrypto === 'USDT') {
      currentPrice = USDT_PRICE;
      requiredAmount = selectedPlanPrice / currentPrice;
    } else {
      currentPrice = realPrices[selectedCrypto];
      if (!currentPrice) throw new Error('السعر غير متوفر');
      const margin = 1.02;
      requiredAmount = (selectedPlanPrice / currentPrice) * margin;
    }

    updatePaymentDetails();
  }

  function updatePaymentDetails() {
    selectedCryptoEl.innerHTML = `
      ${selectedCrypto}
      <img src="${cryptoLogos[selectedCrypto]}"
           alt="${selectedCrypto}"
           class="crypto-icon-small">
    `;

    let decimalPlaces = 6;
    if (selectedCrypto === 'BTC') decimalPlaces = 8;
    if (selectedCrypto === 'USDT') decimalPlaces = 2;
    if (selectedCrypto === 'SOL' && requiredAmount > 1) decimalPlaces = 4;
    if (selectedCrypto === 'BNB' && requiredAmount > 1) decimalPlaces = 4;
    if (selectedCrypto === 'ETH' && requiredAmount > 0.1) decimalPlaces = 4;

    const formattedAmount = requiredAmount.toFixed(decimalPlaces);

    cryptoAmountEl.innerHTML = `
      ${formattedAmount}
      <img src="${cryptoLogos[selectedCrypto]}"
           alt="${selectedCrypto}"
           class="crypto-icon-small">
    `;
  }

  function showPaymentAddress() {
    let address = '';
    let qrCodeUrl = '';

    let networkToUse = selectedCrypto === 'USDT' ? selectedNetwork : cryptoNetworks[selectedCrypto][0];

    if (cryptoAddresses[selectedCrypto] && cryptoAddresses[selectedCrypto][networkToUse]) {
      address = cryptoAddresses[selectedCrypto][networkToUse].address;
      qrCodeUrl = cryptoAddresses[selectedCrypto][networkToUse].qrCode;
    }

    cryptoAddress.value = address;

    cryptoAddress.style.direction = 'ltr';
    cryptoAddress.style.textAlign = 'left';
    cryptoAddress.setAttribute('dir', 'ltr');

    qrImage.src = qrCodeUrl;
    qrContainer.style.display = 'block';
    addressContainer.style.display = 'block';

    currentNetworkText.textContent = networkToUse;
    networkInfo.style.display = 'block';
  }

  window.copyAddress = function copyAddress() {
    cryptoAddress.select();
    cryptoAddress.setSelectionRange(0, 99999);
    document.execCommand("copy");

    const copyBtn = document.querySelector('.copy-btn');
    const originalText = copyBtn.innerHTML;
    copyBtn.innerHTML = '<span>تم النسخ!</span>';
    copyBtn.style.background = '#2ecc71';
    copyBtn.style.color = 'white';
    copyBtn.style.borderColor = '#27ae60';

    setTimeout(() => {
      copyBtn.innerHTML = originalText;
      copyBtn.style.background = '#e3f2fd';
      copyBtn.style.color = '#3498db';
      copyBtn.style.borderColor = '#bbdefb';
    }, 2000);
  }

  function resetSection() {
    unlockSection();

    paymentDetails.style.display = 'none';
    qrContainer.style.display = 'none';
    addressContainer.style.display = 'none';
    addressWarning.style.display = 'none';
    actionButtons.style.display = 'none';
    networkInfo.style.display = 'none';

    networkSelection.style.display = 'none';
    networkOptions.innerHTML = '';
    selectedNetwork = '';

    confirmationMessage.style.display = 'none';
    generateBtn.style.display = 'none';

    // reset crypto selection visuals
    document.querySelectorAll('.crypto-option').forEach(el => el.classList.remove('active'));
    selectedCrypto = '';
    requiredAmount = 0;
    transactionId = '';
    cryptoAddress.value = '';
    qrImage.src = '';

    emailError.style.display = 'none';
    cryptoError.style.display = 'none';
    generalError.style.display = 'none';
    successMessage.style.display = 'none';

    enableGenerateButton();
  }

  function updateAddressWarning() {
    let decimalPlaces = 6;
    if (selectedCrypto === 'BTC') decimalPlaces = 8;
    if (selectedCrypto === 'USDT') decimalPlaces = 2;
    if (selectedCrypto === 'SOL' && requiredAmount > 1) decimalPlaces = 4;
    if (selectedCrypto === 'BNB' && requiredAmount > 1) decimalPlaces = 4;
    if (selectedCrypto === 'ETH' && requiredAmount > 0.1) decimalPlaces = 4;

    const formattedAmount = requiredAmount.toFixed(decimalPlaces);
    exactAmountText.textContent = `${formattedAmount} ${selectedCrypto}`;

    addressWarning.style.display = 'block';
  }

  async function generatePayment() {
    const emailValid = emailInput.checkValidity();

    if(!emailValid) {
      emailError.style.display = 'block';
      emailInput.focus();
      return;
    }

    if(!selectedCrypto) {
      cryptoError.style.display = 'block';
      return;
    }

    if (selectedCrypto === 'USDT' && !selectedNetwork) {
      showError('الرجاء اختيار شبكة التحويل للـ USDT');
      return;
    }

    if (selectedCrypto !== 'USDT') {
      if (!pricesLoaded || !realPrices[selectedCrypto]) {
        showError('حدث خطأ في التوليد. يرجى تحديث الصفحة والمحاولة مرة أخرى');
        return;
      }
    }

    generateBtnText.textContent = 'جاري الحساب.';
    generateBtnLoading.style.display = 'inline-block';
    generateBtn.disabled = true;

    try {
      calculateRequiredAmount();

      transactionId = 'TX' + Date.now() + Math.random().toString(36).substr(2, 9).toUpperCase();

      generateBtn.style.display = 'none';

      lockSection();

      paymentDetails.style.display = 'block';

      if (selectedCrypto === 'USDT') {
        selectedNetworkEl.textContent = selectedNetwork;
        networkRow.style.display = 'flex';
      } else {
        selectedNetworkEl.textContent = cryptoNetworks[selectedCrypto][0];
        networkRow.style.display = 'flex';
      }

      updateAddressWarning();
      showPaymentAddress();
      actionButtons.style.display = 'flex';

    } catch (error) {
      showError('حدث خطأ في الحساب. يرجى تحديث الصفحة والمحاولة مرة أخرى');
    } finally {
      generateBtnText.textContent = 'توليد عنوان الدفع';
      generateBtnLoading.style.display = 'none';
    }
  }

  function confirmPayment() {
    userEmail.textContent = emailInput.value;

    qrContainer.style.display = 'none';
    addressContainer.style.display = 'none';
    actionButtons.style.display = 'none';
    paymentDetails.style.display = 'none';
    networkSelection.style.display = 'none';
    addressWarning.style.display = 'none';
    networkInfo.style.display = 'none';

    // لا نعرض رسالة النجاح هنا - فقط نُظهر لودر ثم نحول المستخدم
    if (cryptoRedirectLoader) cryptoRedirectLoader.style.display = 'flex';

    // تحويل إلى صفحة التأكيد
    setTimeout(() => {
      window.location.href = '/confirmation.html';
    }, 600);
  }

  // ✅ اختيار العملة
  document.querySelectorAll('.crypto-option').forEach(btn => {
    btn.addEventListener('click', function() {
      if (sectionLocked) return;

      document.querySelectorAll('.crypto-option').forEach(b => b.classList.remove('active'));
      this.classList.add('active');

      selectedCrypto = this.dataset.crypto;
      cryptoError.style.display = 'none';

      showNetworkOptions();
      enableGenerateButton();
    });
  });

  generateBtn.addEventListener('click', generatePayment);
  confirmBtn.addEventListener('click', confirmPayment);
  resetBtn.addEventListener('click', resetSection);

  // ✅ وظائف إظهار/إخفاء الكريبتو
  function hideCryptoSection() { cryptoSection.style.display = "none"; resetSection(); }
  window.hideCryptoSection = hideCryptoSection;

}); // DOMContentLoaded end
</script>
</body>
</html>
